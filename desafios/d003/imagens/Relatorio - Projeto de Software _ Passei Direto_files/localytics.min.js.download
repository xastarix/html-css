!function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){n.parse=e("./lib/parse"),n.stringify=e("./lib/stringify")},{"./lib/parse":2,"./lib/stringify":3}],2:[function(e,t,n){var i,o,r,s,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u=function(e){throw{name:"SyntaxError",message:e,at:i,text:r}},c=function(e){return e&&e!==o&&u("Expected '"+e+"' instead of '"+o+"'"),o=r.charAt(i),i+=1,o},f=function(){var e,t="";for("-"===o&&(t="-",c("-"));o>="0"&&o<="9";)t+=o,c();if("."===o)for(t+=".";c()&&o>="0"&&o<="9";)t+=o;if("e"===o||"E"===o)for(t+=o,c(),"-"!==o&&"+"!==o||(t+=o,c());o>="0"&&o<="9";)t+=o,c();return e=+t,isFinite(e)?e:void u("Bad number")},l=function(){var e,t,n,i="";if('"'===o)for(;c();){if('"'===o)return c(),i;if("\\"===o)if(c(),"u"===o){for(n=0,t=0;t<4&&(e=parseInt(c(),16),isFinite(e));t+=1)n=16*n+e;i+=String.fromCharCode(n)}else{if("string"!=typeof a[o])break;i+=a[o]}else i+=o}u("Bad string")},p=function(){for(;o&&o<=" ";)c()},d=function(){switch(o){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null}u("Unexpected '"+o+"'")},m=function(){var e=[];if("["===o){if(c("["),p(),"]"===o)return c("]"),e;for(;o;){if(e.push(s()),p(),"]"===o)return c("]"),e;c(","),p()}}u("Bad array")},g=function(){var e,t={};if("{"===o){if(c("{"),p(),"}"===o)return c("}"),t;for(;o;){if(e=l(),p(),c(":"),Object.hasOwnProperty.call(t,e)&&u('Duplicate key "'+e+'"'),t[e]=s(),p(),"}"===o)return c("}"),t;c(","),p()}}u("Bad object")};s=function(){switch(p(),o){case"{":return g();case"[":return m();case'"':return l();case"-":return f();default:return o>="0"&&o<="9"?f():d()}},t.exports=function(e,t){var n;return r=e,i=0,o=" ",n=s(),p(),o&&u("Syntax error"),"function"==typeof t?function a(e,n){var i,o,r=e[n];if(r&&"object"==typeof r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(o=a(r,i),void 0!==o?r[i]=o:delete r[i]);return t.call(e,n,r)}({"":n},""):n}},{}],3:[function(e,t,n){function i(e){return u.lastIndex=0,u.test(e)?'"'+e.replace(u,function(e){var t=c[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function o(e,t){var n,u,c,f,l,p=r,d=t[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof a&&(d=a.call(t,e,d)),typeof d){case"string":return i(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(r+=s,l=[],"[object Array]"===Object.prototype.toString.apply(d)){for(f=d.length,n=0;n<f;n+=1)l[n]=o(n,d)||"null";return c=0===l.length?"[]":r?"[\n"+r+l.join(",\n"+r)+"\n"+p+"]":"["+l.join(",")+"]",r=p,c}if(a&&"object"==typeof a)for(f=a.length,n=0;n<f;n+=1)u=a[n],"string"==typeof u&&(c=o(u,d),c&&l.push(i(u)+(r?": ":":")+c));else for(u in d)Object.prototype.hasOwnProperty.call(d,u)&&(c=o(u,d),c&&l.push(i(u)+(r?": ":":")+c));return c=0===l.length?"{}":r?"{\n"+r+l.join(",\n"+r)+"\n"+p+"}":"{"+l.join(",")+"}",r=p,c}}var r,s,a,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.exports=function(e,t,n){var i;if(r="",s="","number"==typeof n)for(i=0;i<n;i+=1)s+=" ";else"string"==typeof n&&(s=n);if(a=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return o("",{"":e})}},{}],4:[function(e,t,n){(function(e){var n,i=e.crypto||e.msCrypto;if(i&&i.getRandomValues){var o=new Uint8Array(16);n=function(){return i.getRandomValues(o),o}}if(!n){var r=new Array(16);n=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){function i(e,t,n){var i=t&&n||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){o<16&&(t[i+o++]=c[e])});o<16;)t[i+o++]=0;return t}function o(e,t){var n=t||0,i=u;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}function r(e,t,n){var i=t&&n||0,r=t||[];e=e||{};var s=void 0!==e.clockseq?e.clockseq:d,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:g+1,c=a-m+(u-g)/1e4;if(c<0&&void 0===e.clockseq&&(s=s+1&16383),(c<0||a>m)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=a,g=u,d=s,a+=122192928e5;var f=(1e4*(268435455&a)+u)%4294967296;r[i++]=f>>>24&255,r[i++]=f>>>16&255,r[i++]=f>>>8&255,r[i++]=255&f;var l=a/4294967296*1e4&268435455;r[i++]=l>>>8&255,r[i++]=255&l,r[i++]=l>>>24&15|16,r[i++]=l>>>16&255,r[i++]=s>>>8|128,r[i++]=255&s;for(var h=e.node||p,v=0;v<6;v++)r[i+v]=h[v];return t?t:o(r)}function s(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var r=e.random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var s=0;s<16;s++)t[i+s]=r[s];return t||o(r)}for(var a=e("./rng"),u=[],c={},f=0;f<256;f++)u[f]=(f+256).toString(16).substr(1),c[u[f]]=f;var l=a(),p=[1|l[0],l[1],l[2],l[3],l[4],l[5]],d=16383&(l[6]<<8|l[7]),m=0,g=0,h=s;h.v1=r,h.v4=s,h.parse=i,h.unparse=o,t.exports=h},{"./rng":4}],6:[function(e,t,n){!function(e){"use strict";var n=function(e,t,i){return 1===arguments.length?n.get(e):n.set(e,t,i)};n._document=document,n._navigator=navigator,n.defaults={path:"/"},n.get=function(e){return n._cachedDocumentCookie!==n._document.cookie&&n._renewCache(),n._cache[e]},n.set=function(t,i,o){return o=n._getExtendedOptions(o),o.expires=n._getExpiresDate(i===e?-1:o.expires),n._document.cookie=n._generateCookieString(t,i,o),n},n.expire=function(t,i){return n.set(t,e,i)},n._getExtendedOptions=function(t){return{path:t&&t.path||n.defaults.path,domain:t&&t.domain||n.defaults.domain,expires:t&&t.expires||n.defaults.expires,secure:t&&t.secure!==e?t.secure:n.defaults.secure}},n._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},n._getExpiresDate=function(e,t){switch(t=t||new Date,typeof e){case"number":e=new Date(t.getTime()+1e3*e);break;case"string":e=new Date(e)}if(e&&!n._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},n._generateCookieString=function(e,t,n){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var i=e+"="+t;return i+=n.path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toUTCString():"",i+=n.secure?";secure":""},n._getCookieObjectFromString=function(t){for(var i={},o=t?t.split("; "):[],r=0;r<o.length;r++){var s=n._getKeyValuePairFromCookieString(o[r]);i[s.key]===e&&(i[s.key]=s.value)}return i},n._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");return t=t<0?e.length:t,{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},n._renewCache=function(){n._cache=n._getCookieObjectFromString(n._document.cookie),n._cachedDocumentCookie=n._document.cookie},n._areEnabled=function(){var e="cookies.js",t="1"===n.set(e,1).get(e);return n.expire(e),t},n.enabled=n._areEnabled(),t.exports=n}()},{}],7:[function(e,t,n){var i=function(e){function t(e,t,n){var i,o;n?(i=new Date,i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()):o="",document.cookie=e+"="+t+o+"; path=/"}function n(e){var t,n,i=e+"=",o=document.cookie.split(";");for(t=0;t<o.length;t++){for(n=o[t];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(i))return n.substring(i.length,n.length).replace(/'/g,'"')}return null}function i(n){n=JSON.stringify(n).replace(/"/g,"'"),"session"==e?window.name=n:t("localStorage",n,365)}function o(){"session"==e?window.name="":t("localStorage","",365)}function r(){var t="session"==e?window.name:n("localStorage");return t?JSON.parse(t):{}}var s=r();return{length:0,clear:function(){s={},this.length=0,o()},getItem:function(e){return void 0===s[e]?null:s[e]},key:function(e){var t=0;for(var n in s){if(t==e)return n;t++}return null},removeItem:function(e){delete s[e],this.length--,i(s)},setItem:function(e,t){s[e]=t+"",this.length++,i(s)}}},o=function(){return{localStorage:"undefined"==typeof window.localStorage?new i("local"):window.localStorage,sessionStorage:"undefined"==typeof window.sessionStorage?new i("session"):window.sessionStorage}};t.exports=o},{}],8:[function(e,t,n){(function(t){e("./shim");var n=e("jsonify"),i=e("uuid"),o=e("./cookie"),r=e("./network"),s=e("./localStorage")().localStorage,a="web_3.4.0",u=t[t.LocalyticsGlobal],c=u.q,f=document,l=u.d||100,p=u.t/1e3|0,d="https:"==t.location.protocol?"https:":"http:",m=d+"//webanalytics.localytics.com/api/v2/applications/",g="https://profile.localytics.com/v1/apps/",h=[],v=524288,y=function(){return Date.now?Date.now():(new Date).getTime()},b=function(){return y()/1e3|0},w=encodeURIComponent,x=n.stringify,S=Array.isArray,k=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null},O=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=0;n<t.length;n++)for(var i in t[n])t[n].hasOwnProperty(i)&&(e[i]=t[n][i]);return e},T={},A=Array.prototype.forEach,C=function(e,t,n){if(null==e)return e;if(A&&e.forEach===A)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e)===T)return}else for(var r=_.keys(e),i=0,o=r.length;i<o;i++)if(t.call(n,e[r[i]],r[i],e)===T)return;return e},I=function(e){return"string"==typeof e||e instanceof String},D=function(e){var t=e[0]instanceof Date?Date:typeof e[0];return e.every(function(e){return t===(e instanceof Date?Date:typeof e)})},E=function(e){return e instanceof Date||I(e)||"number"==typeof q(e)},q=function(e){return 0===e?0:!(isNaN(+e)||"boolean"==typeof e||e instanceof Boolean||(e=+e,"number"!=typeof e||isNaN(e)||!isFinite(e)||0===e))&&e},P=function(e){return e<10?"0"+e:e},j=function(e){return e.getUTCFullYear()+"-"+P(e.getUTCMonth()+1)+"-"+P(e.getUTCDate())},R=function(e){var t=[];return e.map(function(e){t.indexOf(e)===-1&&t.push(e)}),t},U=function(){return i.v4()},F=function(){try{c&&c.length&&!function(e){var t=e[0].split(".")[1]||"",n=H[t]||function(){var n="init extend",i=e[0].split(".")[0];if(1==n.split(i).length)throw new Error("You must call init before calling "+i);return H[t]=new X(t)}(),i=e.splice(0,1)[0].split(".")[0];i in n&&n[i].apply(n,e)}(Array.prototype.slice.apply(c.splice(0,1)[0]))}catch(e){}setTimeout(F,l)},N={cookies:"file:"!=t.location.protocol&&navigator.cookieEnabled||function(e){f.cookie=e+"=1";var t=f.cookie.indexOf(e+"=")!=-1;return f.cookie=e+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}(U())},V={trackPageView:!1,sessionTimeout:1800},H=[],L={install_uuid:"iu",event_store:"es",current_header:"ch",device_birth_time:"pa",session_uuid:"csu",session_open_time:"cst",session_action_time:"ct",session_index:"csi",sequence_index:"csq",last_open_time:"lot",last_close_time:"lct",screen_flows:"fl",custom_dimensions:"cd",identifiers:"ids",upload_queue:"que"},M=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:e[1]||""}):"Chrome"===n[1]&&(e=t.match(/\bOPR\/(\d+)/),null!=e)?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})}(),X=function(e){return this.namespace=e||"",this},K=X.prototype;O(K,{storage:function(){var e=this,t="_loc_"+(e.namespace?e.namespace+"_":"");return{get:function(i){var r;return r=e.options.cookies?o.get(t+i):s.getItem(t+i),r&&n.parse(r)},set:function(i,r){return e.options.cookies?o.set(t+i,n.stringify(r)):s.setItem(t+i,n.stringify(r)),r},remove:function(n){e.options.cookies?o.expire(t+n):s.removeItem(t+n)},getOrSet:function(t,n){var i=e.storage().get(t);return null===i||"undefined"==typeof i?e.storage().set(t,n):i},increment:function(t){var n=parseInt(e.storage().getOrSet(t,0));return e.storage().set(t,++n)},getPrefix:function(){return t}}},queue:function(){var e=this;return e.options.cacheOffline&&(h=e.storage().getOrSet(L.upload_queue,[])),{list:function(){return h},flush:function(){var e=h;return h=[],this.save(),e},enqueue:function(e){h.push(e),this.save()},save:function(){if(e.options.cacheOffline){var t=2*h.join("").length;t<=v&&e.storage().set(L.upload_queue,h)}}}},identity:function(){var e=this;return{uuid:function(){var t=function(){return!!N.cookies&&o.get("__ll_"+(e.namespace?e.namespace:"")+L.install_uuid)}()||U();return e.options.installId?e.storage().getOrSet(L.install_uuid,e.options.installId):e.storage().getOrSet(L.install_uuid,t.replace(/\"/g,""))},birthTime:function(){var t=function(){return!!N.cookies&&o.get("__ll_"+(e.namespace?e.namespace:"")+L.device_birth_time)}()||p;return e.storage().getOrSet(L.device_birth_time,t)}}},session:function(){var e=this;return{uuid:function(){return e.storage().getOrSet(L.session_uuid,U())},openTime:function(){return e.storage().getOrSet(L.session_open_time,p)},index:function(){return e.storage().getOrSet(L.session_index,0)},actionTime:function(){return e.storage().getOrSet(L.session_action_time,p)},updateActionTime:function(){var t=e.storage().get(L.session_action_time);return(!t||t<b()-e.options.sessionTimeout)&&(e.close(),e.session().create(),e.open()),e.storage().set(L.session_action_time,b())},initialize:function(){e.session().updateActionTime()},destroy:function(){e.storage().remove(L.session_uuid),e.storage().remove(L.session_open_time),e.storage().remove(L.session_action_time)},create:function(){e.session().uuid(),e.session().openTime(),e.storage().increment(L.session_index)},exists:function(){return!!e.storage().get(L.session_uuid)}}},device:function(){return{language:(navigator.language||navigator.userLanguage||"").toUpperCase(),platform:navigator.platform,make:navigator.vendor,model:navigator.platform}},extend:function(){C(arguments,function(e){O(K,e)})}}),O(K,{_url:function(e){var t=[];return C(e,function(e,n){t.push(x(e))}),t=t.join("\n"),[m,this.options.appKey,"/uploads/image.gif?client_date=",b(),"&callback=z&data=",w(t)].join("")},_upload:function(e){O(e,function(e,t){for(var n=0;n<e.length;n++)"undefined"!=typeof e[n]&&(t["c"+n]=e[n]);return t}(this.storage().getOrSet(L.custom_dimensions,[]),{}));var t=[this._header(),e];this.options.autoUpload?this.upload(t):this.queue().enqueue(t)},_commonData:function(e){var t=this;return O({ct:b(),u:U(),su:t.session().uuid(),mc:k("utm_campaign"),mm:k("utm_medium"),ms:k("utm_source")},e)},_header:function(){var e=this,t={dt:"h",pa:e.identity().birthTime(),seq:e.storage().increment(L.sequence_index),u:U(),attrs:{dt:"a",au:e.options.appKey,iu:e.identity().uuid(),lv:a,dmo:e.device().platform,dll:e.device().language,dma:e.device().make},ids:e.storage().getOrSet(L.identifiers,{})};return this.options.appVersion&&(t.attrs.av=this.options.appVersion),t},_get:function(e){var t=this,n=function(e){this.queue().enqueue(e)}.bind(t,e);r.get(this._url(e),n)},_post:function(e){var t=this,i=e.map(function(e){return e.map(function(e){return n.stringify(e)}).join("\n")}).join("\n"),o=function(e){C(e,function(e){this.queue().enqueue(e)})}.bind(t,e);r.post([m,this.options.appKey,"/uploads"].join(""),i,b(),o)},_postProfile:function(e,t,n,i){if(I(t)&&(!S(n)||n.every(E))&&(S(n)||E(n))){var o=this.getIdentifier("customer_id")||this.identity().uuid(),s=[["x-customer-id",o],["x-install-id",this.identity().uuid()]];S(n)?(D(n)||(n=n.map(function(e){return e instanceof Date?j(e):e.toString()})),n[0]instanceof Date&&(n=n.map(function(e){return j(e)})),n=R(n).map(function(e){return e instanceof String?e.toString():e})):n instanceof Date?n=j(n):n instanceof String&&(n=n.toString());var a={database:i&&"app"===i?"app":"org",changes:[{op:e,attr:t.toString()}]};"delete"!==e&&(a.changes[0].value=n);var u=w(o);r.post([g,this.options.appKey,"/profiles/",u].join(""),x(a),b(),!1,s)}}}),O(K,{init:function(e,t){this.options=O({},V,t),this.options.appKey=e,this.options.domain&&N.cookies&&(o.defaults.domain=this.options.domain,this.options.cookies=!0),N.cookies&&(o.defaults.expires=31536e4),"localStorage"in window||(this.options.cookies=!0);var n=this;this.options.customDimensions&&C(this.options.customDimensions,function(e,t){n.setCustomDimension(t,e)}),C(["customerEmail","customerId","customerName"],function(e,t){n.options[e]&&n["set"+e[0].toUpperCase()+e.slice(1)](n.options[e])}),this.options.useXHR=this.options.useXHR||this.options.cacheOffline||!1,this.options.autoUpload=this.options.autoUpload!==!1,"undefined"!=typeof XMLHttpRequest&&("withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest)||(this.options.useXHR=!1,this.options.cacheOffline=!1),"msie"==M.name.toLowerCase()&&M.version<=9&&(this.options.useXHR=!1,this.options.cacheOffline=!1),n.options.installId&&n.storage().set(L.install_uuid,n.options.installId),this.session().initialize(),this.options.trackPageView&&this.trackPageView()},open:function(){var e={dt:"s",ct:this.session().openTime(),u:this.session().uuid(),nth:this.session().index(),mc:k("utm_campaign"),mm:k("utm_medium"),ms:k("utm_source"),cid:this.getIdentifier("customer_id")||this.identity().uuid(),utp:this.getIdentifier("customer_id")?"known":"anonymous"};this._upload(e)},close:function(){if(this.session().exists()){var e={dt:"c",u:U(),ss:this.session().openTime(),su:this.session().uuid(),ct:this.session().actionTime(),ctl:this.session().actionTime()-this.session().openTime(),cta:this.session().actionTime()-this.session().openTime(),fl:this.storage().getOrSet(L.screen_flows,[]),cid:this.getIdentifier("customer_id")||this.identity().uuid(),utp:this.getIdentifier("customer_id")?"known":"anonymous"};this._upload(e),this.session().destroy()}},trackPageView:function(){this.tagEvent("Page View",{URL:t.location.href,Title:f.title,Referrer:f.referrer||"Direct"})},tagScreen:function(e){var t=this.storage().getOrSet(L.screen_flows,[]);t[t.length-1]!=e&&t.push(e),this.storage().set(L.screen_flows,t)},tagEvent:function(e,t,n){this.session().updateActionTime();var i=this._commonData({dt:"e",n:""+e,cid:this.getIdentifier("customer_id")||this.identity().uuid(),utp:this.getIdentifier("customer_id")?"known":"anonymous"});t&&"object"==typeof t?i.attrs=O({},t):"number"==typeof t&&"undefined"==typeof n&&(n=t),"number"==typeof n&&n>0&&(i.v=n),this._upload(i)},setProfileAttribute:function(e,t,n){this.session().updateActionTime(),this._postProfile("assign",e,t,n)},deleteProfileAttribute:function(e,t){this.session().updateActionTime(),this._postProfile("delete",e,"",t)},addProfileAttributesToSet:function(e,t,n){this.session().updateActionTime(),S(t)||(t=[t]),this._postProfile("set-add",e,t,n)},removeProfileAttributesFromSet:function(e,t,n){this.session().updateActionTime(),S(t)||(t=[t]),this._postProfile("set-remove",e,t,n)},incrementProfileAttribute:function(e,t,n){this.session().updateActionTime(),t=q(t),t&&this._postProfile("increment",e,t,n)},decrementProfileAttribute:function(e,t,n){this.session().updateActionTime(),t=q(t),t&&(t>0&&(t*=-1),this._postProfile("increment",e,t,n))},setCustomDimension:function(e,t){if("number"==typeof e&&e<=19&&e>=0){var n=this.storage().getOrSet(L.custom_dimensions,[]);n[e]=t,this.storage().set(L.custom_dimensions,n)}},setIdentifier:function(e,t){var n=this.storage().getOrSet(L.identifiers,{});t?n[e]=t:delete n[e],this.storage().set(L.identifiers,n)},getIdentifier:function(e){var t=this.storage().getOrSet(L.identifiers,{});return e in t&&t[e]},setCustomerEmail:function(e){this.setIdentifier("customer_email",e),this.setProfileAttribute("$email",e,"org")},setCustomerFirstName:function(e){this.setIdentifier("first_name",e),this.setProfileAttribute("$first_name",e,"org")},setCustomerLastName:function(e){this.setIdentifier("last_name",e),this.setProfileAttribute("$last_name",e,"org")},setCustomerFullName:function(e){this.setIdentifier("full_name",e),this.setProfileAttribute("$full_name",e,"org")},setCustomerId:function(e){this.getIdentifier("customer_id")!==e&&(this.storage().set(L.identifiers,{}),e&&this.setIdentifier("customer_id",e))},setCustomerName:function(e){this.setIdentifier("customer_name",e)},setPrivacyOptedOut:function(e){this.setProfileAttribute("privacy_delete",e===!0?1:0,"app")},upload:function(e){var t=this,n=[];!e||e[0]instanceof Array||(n=[e]),(this.options.autoUpload&&(this.options.autoUpload||this.options.cacheOffline)||(n=this.queue().flush(),0!==n.length))&&(this.options.useXHR?t._post(n):C(n,function(e){t._get(e)}))},clearCustomDimensions:function(){this.storage().remove(L.custom_dimensions)},clearIdentifiers:function(){this.storage().remove(L.identifiers)}}),F()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cookie":6,"./localStorage":7,"./network":9,"./shim":10,jsonify:1,uuid:5}],9:[function(e,t,n){!function(){"use strict";var e=document,n=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},i=function(){};i.defaults={maxFailedAttempts:3},i._enabled=!0,i._failedAttempts=0,i.get=function(t,o){if(!i._isEnabled())return n(o)&&o(),!1;var r=e.createElement("img");r.onerror=i._onError.bind(null,o),r.src=t},i.post=function(e,t,o,r,s){if(s=s||[],!i._isEnabled())return n(r)&&r(),!1;var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Content-Encoding","UTF-8"),a.setRequestHeader("x-upload-time",o),s.map(function(e){a.setRequestHeader(e[0],e[1])}),a.timeout=0,a.onreadystatechange=function(){var e;4===a.readyState&&(e=a.status,200==e||202==e||e>=400&&e<500?i._reset():(e>=500&&e<600||0==e)&&i._onError(r))},a.send(t)},i._onError=function(e){n(e)&&e(),i._failedAttempts++,i._failedAttempts>=i.defaults.maxFailedAttempts&&(i._enabled=!1)},i._reset=function(){i._failedAttempts=0,i._enabled=!0},i._isEnabled=function(){return i._enabled},i.isEnabled=i._isEnabled,t.exports=i}()},{}],10:[function(e,t,n){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),o.prototype=new i,o})},{}]},{},[8]);