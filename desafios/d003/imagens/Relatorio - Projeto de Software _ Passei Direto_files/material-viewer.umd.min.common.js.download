(("undefined"!==typeof self?self:this)["webpackJsonppdMaterialViewer"]=("undefined"!==typeof self?self:this)["webpackJsonppdMaterialViewer"]||[]).push([[0],{"0455":function(t,e,n){var r=n("834d");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("499e").default;o("19342ea3",r,!0,{sourceMap:!1,shadowMode:!1})},"0f38":function(t,e,n){"use strict";var r=n("d863");e["a"]={mixins:[r["a"]],props:{hideExpandArrow:{type:Boolean,required:!1,default:!1},visible:{type:Boolean,required:!1,default:!0},absolute:{type:Boolean,default:!0}},data:function(){return{expand:!1}},mounted:function(){this.absolute&&this.updatePlaceholderDimensions()},methods:{updatePlaceholderDimensions:function(){var t=this,e=this.$refs.infobar,n=this.$refs.placeholder,r=window.getComputedStyle(e),o=r.height,a=r.width;"auto"!==o&&"auto"!==a?(n.style.height=o,n.style.width=a):setTimeout((function(){return t.updatePlaceholderDimensions()}),10)},toggleExpand:function(){this.expand=!this.expand,this.$emit("toggleExpand",this.expand)}}}},"0f80":function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-material-viewer-container"},[e("v-layout",{ref:"infobar",staticClass:"mv-material-viewer-infobar",class:{active:t.expand,"align-end":t.expand,"align-center":!t.expand,visible:t.visible,absolute:t.absolute},attrs:{row:"","justify-end":"","no-wrap":"","align-end":""}},[e("v-flex",{staticClass:"mv-infobar-main-content"},[t._t("main")],2),e("v-flex",{key:t.material.Id,staticClass:"mv-infobar-actions",attrs:{xs6:""}},[e("span",{staticClass:"user"},[t.material.User?e("pd-author-badge",{attrs:{user:t.material.User,showPopover:!1,sizeAvatar:30}},[e("div",{staticClass:"pd-caption"},[t._v(t._s(t.$t("viewer.infobar.materialTimeLabel",{materialCreationElapsedTime:t.materialCreationElapsedTime})))])]):t._e()],1)]),t.hideExpandArrow?t._e():e("div",{staticClass:"mv-infobar-expand-arrow",on:{click:t.toggleExpand}},[e("v-icon",{attrs:{size:"25"}},[t._v("keyboard_arrow_down")])],1)],1),t.absolute?e("pd-collapse",{attrs:{value:t.visible}},[e("div",{ref:"placeholder",staticClass:"mv-material-viewer-infobar-placeholder"})]):t._e()],1)},o=[],a=n("3e25"),i=n("1c56"),s=n("0f38"),c={name:"MaterialViewerInfobarAttachmentPost",mixins:[s["a"]],components:{PdCollapse:i["a"],PdAuthorBadge:a["a"]}},m=c,l=(n("d19b"),n("2877")),u=Object(l["a"])(m,r,o,!1,null,"9a723350",null);e["a"]=u.exports},1320:function(t,e,n){var r=n("7d23");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("499e").default;o("0ff9155b",r,!0,{sourceMap:!1,shadowMode:!1})},"28f6":function(t,e,n){"use strict";n("9c2f")},"4fdb":function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-material-viewer-container"},[e("v-layout",{ref:"infobar",staticClass:"mv-material-viewer-infobar",class:{active:t.expand,"align-end":t.expand,"align-center":!t.expand,visible:t.visible,absolute:t.absolute},attrs:{row:"","justify-end":"",wrap:"","align-end":""}},[e("v-flex",{staticClass:"mv-infobar-main-content"},[t._t("main")],2),e("v-flex",{staticClass:"mv-infobar-metadata",attrs:{xs6:""}},[t._t("metadata")],2),e("v-flex",{key:t.material.Id,staticClass:"mv-infobar-actions",attrs:{xs6:""}},[e("pd-positive-evaluation",{attrs:{"content-object-id":t.material.Id,"evaluation-count":t.material.PositiveEvaluationCount,"track-data":t.localTrackData}}),e("pd-negative-evaluation",{attrs:{"content-object-id":t.material.Id,"evaluation-count":t.material.NegativeEvaluationCount,"track-data":t.localTrackData}}),t._t("third-icon"),e("span",{staticClass:"user"},[t.material.User?e("pd-author-badge",{attrs:{user:t.material.User,showPopover:!1,sizeAvatar:30}},[e("div",{staticClass:"pd-caption"},[t._v(t._s(t.$t("viewer.infobar.materialTimeLabel",{materialCreationElapsedTime:t.materialCreationElapsedTime})))])]):t._e()],1)],2),t.hideExpandArrow?t._e():e("div",{staticClass:"mv-infobar-expand-arrow",on:{click:t.toggleExpand}},[e("v-icon",{attrs:{size:"25"}},[t._v("keyboard_arrow_down")])],1)],1),t.absolute?e("pd-collapse",{attrs:{value:t.visible}},[e("div",{ref:"placeholder",staticClass:"mv-material-viewer-infobar-placeholder"})]):t._e()],1)},o=[],a=n("5b6c"),i=n("3e25"),s=n("1fe7"),c=n("2b88"),m=n("5880"),l=n("1c56"),u=n("0f38");function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e=h(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=b(t,"string");return"symbol"===d(e)?e:String(e)}function b(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var y={name:"MaterialViewerInfobar",mixins:[u["a"]],data:function(){return{baseTrackData:{context:"detail"}}},props:{trackData:{type:Object,default:function(){return{}}}},computed:f({hasMetadataSlot:function(){return!!this.$slots.metadata},localTrackData:function(){return Object.assign({},this.baseTrackData,this.trackData)}},Object(m["mapGetters"])({commentCount:"viewer/materialViewer/comments/count"})),components:{PdCollapse:l["a"],PdPositiveEvaluation:s["a"],PdNegativeEvaluation:c["a"],PdButtonBase:a["a"],PdAuthorBadge:i["a"]}},g=y,x=(n("c645"),n("2877")),w=Object(x["a"])(g,r,o,!1,null,"0ee5126a",null);e["a"]=w.exports},"56bf":function(t,e,n){"use strict";n("0455")},"60d5":function(t,e,n){var r=n("eef0");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("499e").default;o("00fc4064",r,!0,{sourceMap:!1,shadowMode:!1})},"6db9":function(t,e,n){"use strict";n("912b")},"77f7":function(t,e,n){var r=n("91f8");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("499e").default;o("12e44a81",r,!0,{sourceMap:!1,shadowMode:!1})},"7d23":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.mv-material-viewer-infobar .mv-infobar-expand-arrow[data-v-0ee5126a]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mv-material-viewer-container[data-v-0ee5126a]{position:relative;z-index:5}.mv-material-viewer-container[data-v-0ee5126a]:after,.mv-material-viewer-container[data-v-0ee5126a]:before{content:" ";display:table}.mv-material-viewer-infobar-placeholder[data-v-0ee5126a]{height:70px}.mv-material-viewer-infobar[data-v-0ee5126a]{padding:10px 20px;background-color:#f6f5f8;box-shadow:1px 1px 3px rgba(0,0,0,.33);transition:all .3s;opacity:0;-ms-transform:translateY(-50px);transform:translateY(-50px)}.mv-material-viewer-infobar.absolute[data-v-0ee5126a]{position:absolute;left:0;right:0;top:0;pointer-events:none}.mv-material-viewer-infobar.visible[data-v-0ee5126a]{opacity:1;-ms-transform:translateY(0);transform:translateY(0);pointer-events:auto}.mv-material-viewer-infobar.active[data-v-0ee5126a]{padding-bottom:20px;z-index:11}.mv-material-viewer-infobar.active .mv-infobar-expand-arrow i[data-v-0ee5126a]{-ms-transform:translate(-50%,-50%) rotate(180deg);transform:translate(-50%,-50%) rotate(180deg)}.mv-material-viewer-infobar .mv-infobar-main-content[data-v-0ee5126a]{width:100%}.mv-material-viewer-infobar .mv-infobar-actions[data-v-0ee5126a]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;color:#494b56;font-size:14px;font-size:.875rem}.mv-material-viewer-infobar .mv-infobar-actions>*[data-v-0ee5126a]{margin-right:5px;margin-left:25px}.mv-material-viewer-infobar .mv-infobar-actions .pd-icon[data-v-0ee5126a]{font-size:20px;font-size:1.25rem}.mv-material-viewer-infobar .mv-infobar-actions .user[data-v-0ee5126a]{border-left:1px solid #d1d2d3;padding-left:25px;margin-left:25px}.mv-material-viewer-infobar .mv-infobar-expand-arrow[data-v-0ee5126a]{position:absolute;left:50%;bottom:-20px;-ms-transform:translate(-50%);transform:translate(-50%);width:34px;height:34px;cursor:pointer;z-index:1}.mv-material-viewer-infobar .mv-infobar-expand-arrow[data-v-0ee5126a]:before{content:"";position:absolute;left:50%;bottom:3px;-ms-transform:translate(-50%);transform:translate(-50%);height:19px;width:34px;display:block;border-radius:0 0 17px 17px;box-shadow:0 1px 1px rgba(0,0,0,.33);background-color:#f6f5f8;z-index:1}.mv-material-viewer-infobar .mv-infobar-expand-arrow i[data-v-0ee5126a]{position:absolute;top:50%;left:50%;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:relative;color:#ff7300;z-index:2}',""])},"834d":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".mv-comments-item-container .mv-comments-item .mv-comment-reply[data-v-2c8bcd59]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mv-comments-item-container[data-v-2c8bcd59]{padding:16px 0;margin-left:16px;margin-right:8px;border-bottom:1px solid #d1d2d3;position:relative}.mv-comments-item-container .mv-comments-item[data-v-2c8bcd59]{min-height:50px;height:100%;display:-ms-flexbox;display:flex}.mv-comments-item-container .mv-comments-item .mv-comments-item-avatar[data-v-2c8bcd59]{margin-top:0}.mv-comments-item-container .mv-comments-item .mv-comments-item-content[data-v-2c8bcd59]{padding-left:8px;margin-top:4px;width:100%;font-size:.813rem}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-name[data-v-2c8bcd59]{display:-ms-flexbox!important;display:flex!important;color:#fafafa;/*! autoprefixer: ignore next */overflow:hidden;text-overflow:ellipsis;/*! autoprefixer: ignore next */-webkit-box-orient:vertical;padding:0;word-break:break-word;line-clamp:1;-webkit-line-clamp:1;-moz-line-clamp:1;display:block;display:-webkit-box;display:-moz-box;visibility:visible;word-break:break-all;font-size:14px;font-size:.875rem;line-height:17px;max-height:18px;max-height:17px;padding-right:25px}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-name a[data-v-2c8bcd59]{color:#2e2f32;font-weight:600;margin-right:4px}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-name span[data-v-2c8bcd59]{color:#90939e;font-size:.813rem}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-name i[data-v-2c8bcd59]{font-size:.813rem;margin-right:4px;-ms-flex-item-align:center;align-self:center}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-comment[data-v-2c8bcd59]{padding:8px 0}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-comment a[data-v-2c8bcd59]{font-size:.875rem;font-weight:600;margin-right:4px}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content span[data-v-2c8bcd59]{font-size:.875rem;word-wrap:break-word;word-break:break-word}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content span[data-v-2c8bcd59] p:last-child{margin-bottom:0}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content span[data-v-2c8bcd59] p:first-child{display:inherit}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .footer[data-v-2c8bcd59]{margin:5px 0 0;color:#90939e;display:-ms-flexbox;display:flex;line-height:1.2}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .footer .mv-comment-evaluation[data-v-2c8bcd59]{font-size:1.125rem;margin-top:2px}.mv-comments-item-container .mv-comments-item .mv-comment-reply[data-v-2c8bcd59]{margin-right:32px}.mv-comments-item-container .mv-comments-item .mv-comment-reply span[data-v-2c8bcd59]{margin-left:4px;font-size:.875rem}.mv-comments-item-container .mv-comments-item .mv-comment-action-menu[data-v-2c8bcd59]{right:0;top:16px}.mv-comments-item-container .mv-comments-item .selected[data-v-2c8bcd59]{-webkit-filter:grayscale(0);filter:grayscale(0)}.mv-comments-item-container .mv-comment-replies[data-v-2c8bcd59]{display:-ms-flexbox;display:flex;margin-top:16px}.mv-comments-item-container .mv-comment-replies .reply-separator[data-v-2c8bcd59]{width:32px;border-top:1px solid #d1d2d3;margin-top:12px;margin-right:8px}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list[data-v-2c8bcd59]{width:100%}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-replies-answers[data-v-2c8bcd59]{margin-bottom:8px;color:#90939e;font-size:.813rem;line-height:2;cursor:pointer;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-replies-answers span[data-v-2c8bcd59]:hover{text-decoration:underline}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comments-item-container[data-v-2c8bcd59]{border-bottom:1px solid rgba(0,0,0,0);margin:0 0 16px;padding:0}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-action-menu[data-v-2c8bcd59]{top:2px}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-load-recent span[data-v-2c8bcd59]{color:#90939e;font-size:.813rem;line-height:2;cursor:pointer}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-load-recent span[data-v-2c8bcd59]:hover{text-decoration:underline}@keyframes blink-2c8bcd59{0%{background-color:rgba(209,210,211,0)}50%{background-color:#d1d2d3}to{background-color:rgba(209,210,211,0)}}.mark[data-v-2c8bcd59]{animation:blink-2c8bcd59 2s ease}.pd-action-menu.corner-right[data-v-2c8bcd59]{right:2px!important}",""])},"912b":function(t,e,n){var r=n("eca1");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("499e").default;o("19d8ad7a",r,!0,{sourceMap:!1,shadowMode:!1})},"91f8":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.mv-comments-content[data-v-5a43bafa]{width:100%;min-height:120px;background-color:#f6f5f8}.mv-comments-content .mv-comments-title[data-v-5a43bafa]{background-color:#fff;padding:12px;line-height:1.2}.mv-comments-content .mv-comments-title[data-v-5a43bafa]:after{box-shadow:none;transition:all .2s ease-in-out;content:"";display:-ms-flexbox;display:flex;height:4px;position:absolute;top:38px;left:-1px;width:100%;z-index:1}.mv-comments-content .mv-comments-title span[data-v-5a43bafa]{color:#90939e}.mv-comments-content .mv-comments-title.mv-comments-scrolling[data-v-5a43bafa]:after{box-shadow:0 2px 1px 0 rgba(0,0,0,.3);transition:all .2s ease-in-out}.mv-comments-content .mv-comment-list[data-v-5a43bafa]{max-height:265px}.mv-comments-content .mv-new-comment[data-v-5a43bafa]{padding:16px;line-height:20px;background-color:#fff}',""])},"9c2f":function(t,e,n){var r=n("b431");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("499e").default;o("4f6a818c",r,!0,{sourceMap:!1,shadowMode:!1})},"9dff":function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("v-menu",{attrs:{"content-class":"mv-comments-menu",transition:"slide-y-transition","close-on-content-click":!1,"nudge-width":300,"offset-y":"",lazy:"","offset-overflow":"","close-on-click":t.mayCloseOnClick,"nudge-left":"150","z-index":"31"},model:{value:t.activated,callback:function(e){t.activated=e},expression:"activated"}},[t._t("default",(function(){return[e("div",{staticClass:"comment-icon-count test_comment_option"},[e("i",{staticClass:"pd-icon comment active",class:{"text-orange":t.activated}}),e("span",{staticClass:"comment-count"},[t._v(t._s(t.commentCount))])])]}),{slot:"activator"}),e("material-viewer-comments",{attrs:{mayCloseOnClick:t.mayCloseOnClick},on:{"update:mayCloseOnClick":function(e){t.mayCloseOnClick=e},"update:may-close-on-click":function(e){t.mayCloseOnClick=e}}})],2)},o=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-comments-content"},[e("transition",{attrs:{name:"pd-fade-transition"}},[e("pd-loader",{directives:[{name:"show",rawName:"v-show",value:t.loading||!t.list,expression:"loading || !list"}],attrs:{color:"orange"}})],1),e("pd-collapse",{attrs:{value:!t.loading||t.list&&t.list.length>0,fade:""}},[e("div",{staticClass:"mv-comments-title test_comment_box_title",class:{"mv-comments-scrolling":t.scrolling}},[e("strong",[t._v(t._s(t.$t("viewer.comments.commentTitle")))]),e("span",[t._v(" • "+t._s(t.material.CommentCount))])]),e("div",{staticClass:"test_list_of_comments mv-comment-list pd-fancy-scroll",on:{scroll:t.onScroll}},t._l(t.list,(function(n){return e("material-viewer-comment-item",t._g({key:n.Id,ref:"comment".concat(n.Id),refInFor:!0,attrs:{comment:n,currentReplyingComment:t.commentReplyingTo,parentComment:t.parentComment},on:{deleteComment:t.onDeleteComment,startReply:t.onStartReply,loadMoreReplies:t.loadRepliesForComment,deleteReply:t.onDeleteReply}},t.$listeners))})),1),e("div",{staticClass:"mv-new-comment"},[e("material-comment-editor",{attrs:{saving:t.sending,buttonText:t.buttonText,commentReplyingTo:t.commentReplyingTo},on:{save:t.submitMessage,stopReply:t.onStopReply},model:{value:t.newComment,callback:function(e){t.newComment=e},expression:"newComment"}})],1)])],1)},i=[],s=n("5880"),c=n("60bb"),m=n.n(c),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-comments-item-container"},[e("div",{staticClass:"mv-comments-item"},[e("div",{staticClass:"test_userImage_on_comment mv-comments-item-avatar"},[e("pd-user-avatar",{attrs:{size:26,imageSrc:t.comment.Author.ImageUrl}})],1),e("div",{staticClass:"mv-comments-item-content"},[e("div",{staticClass:"content"},[e("div",{staticClass:"test_userName_on_comment user-name"},[e("router-link",{attrs:{to:t.userAuthorRouter}},[t._v(t._s(t.comment.Author.Name))]),t.comment.Author.isVerified?e("i",{staticClass:"pd-icon verified small"}):t._e(),e("span",{staticClass:"test_comment_time"},[t._v(" • "+t._s(t.daysSincePublished))])],1),e("div",{staticClass:"user-comment"},[t.comment.ReplyTo?e("router-link",{attrs:{to:t.userReplyRouter}},[t._v(t._s(t.comment.ReplyTo.Name))]):t._e(),e("span",{staticClass:"test_comment_text",domProps:{innerHTML:t._s(t.formattedCommentText)}})],1)]),e("div",{staticClass:"footer"},[e("div",{staticClass:"mv-comment-reply"},[e("i",{staticClass:"test_commentReply_option pd-icon inline reply active",class:{selected:t.isCurrentReplyingTo},on:{click:t.onStartReply}}),t.comment.ParentId?t._e():e("span",[t._v(t._s(t.comment.ReplyCount))])]),e("pd-positive-evaluation",{staticClass:"test_commentLike_option mv-comment-evaluation",attrs:{tooltipPosition:"top","content-object-id":t.comment.Id,"evaluation-count":t.comment.PositiveEvaluationCount}})],1)]),e("pd-action-menu",{directives:[{name:"show",rawName:"v-show",value:t.showActionMenuActivator,expression:"showActionMenuActivator"}],staticClass:"mv-comment-action-menu",attrs:{left:""},model:{value:t.isActionMenuOpen,callback:function(e){t.isActionMenuOpen=e},expression:"isActionMenuOpen"}},[e("ul",[t.isAuthor?e("li",{staticClass:"test_delete_comment_button",on:{click:t.onDeleteComment}},[e("v-icon",[t._v("delete")]),t._v("\n\t\t\t\t\t"+t._s(t.$t("common.actionMenu.remove"))+"\n\t\t\t\t")],1):e("li",{on:{click:t.reportComment}},[e("v-icon",[t._v("flag")]),t._v("\n\t\t\t\t\t"+t._s(t.$t("common.actionMenu.denounce"))+"\n\t\t\t\t")],1)])])],1),t.comment.Replies&&t.comment.Replies.length>0?e("div",{staticClass:"mv-comment-replies"},[e("div",{staticClass:"reply-separator"}),e("div",{staticClass:"test_list_of_replies mv-comment-replies-list"},[t.shouldLoadOlderReplies?e("div",{staticClass:"test_showAnswers_option mv-comment-replies-answers",on:{click:t.onLoadMoreReplies}},[e("span",[t._v(t._s(t.$t("viewer.comments.viewPreviousReplies").replace(":current",t.comment.Replies?t.comment.Replies.length:0).replace(":total",t.comment.ReplyCount)))])]):t._e(),t._l(t.comment.Replies,(function(n){return e("material-viewer-comment-item",t._g({key:n.Id,ref:"reply".concat(n.Id),refInFor:!0,attrs:{comment:n,currentReplyingComment:t.currentReplyingComment,parentComment:t.comment},on:{deleteComment:t.onDeleteReply}},t.$listeners))}))],2)]):t._e()])},u=[],d=n("c32d"),p=n.n(d),f=n("bdd0"),v=n("ebb3"),h=n("f6be"),b=n("1fe7"),y=n("766b"),g=n("27a0");function x(t){var e=document.createTextNode(t),n=document.createElement("p");return n.appendChild(e),n.innerHTML}var w={formatHtmlWithLineBreaks:function(t){var e=x(t);return e=e.split("\n\n").map((function(t){return"<p>"+t.split("\n").join("<br>")+"</p>"})).join(" "),e}},C=n("3f7c"),_=n("9957");function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function R(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */R=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(j){c=function(t,e,n){return t[e]=n}}function m(t,e,n,o){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),s=new P(o||[]);return r(i,"_invoke",{value:w(t,n,s)}),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=m;var u={};function d(){}function p(){}function f(){}var v={};c(v,a,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(T([])));b&&b!==e&&n.call(b,a)&&(v=b);var y=f.prototype=d.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(r,a,i,s){var c=l(t[r],t,a);if("throw"!==c.type){var m=c.arg,u=m.value;return u&&"object"==k(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(u).then((function(t){m.value=t,i(m)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function w(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return E()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=C(i,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,u;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:p,configurable:!0}),p.displayName=c(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,c(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(x.prototype),c(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(m(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(y),c(y,s,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function O(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(m){return void n(m)}s.done?e(c):Promise.resolve(c).then(r,o)}function P(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){O(a,r,o,i,s,"next",t)}function s(t){O(a,r,o,i,s,"throw",t)}i(void 0)}))}}var T={name:"MaterialViewerCommentItem",mixins:[h["a"]],props:{comment:{type:Object,required:!0},currentReplyingComment:{type:Object,default:null},parentComment:{type:Object,default:null},pageSize:{type:Number,default:10}},components:{PdPositiveEvaluation:b["a"],PdActionMenu:v["a"],PdUserAvatar:f["a"]},methods:{onDeleteComment:function(){var t=this;return P(R().mark((function e(){return R().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("deleteComment",t.comment,t.parentComment);case 1:case"end":return e.stop()}}),e)})))()},onDeleteReply:function(t,e){var n=this;return P(R().mark((function e(){return R().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.$emit("deleteReply",t,n.comment);case 1:case"end":return e.stop()}}),e)})))()},reportComment:function(){var t=this;return P(R().mark((function e(){return R().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("update:mayCloseOnClick",!1),g["a"].open(C["a"],{materialId:t.comment.Id,addMaterialReportOption:!1,onClose:function(){t.$emit("update:mayCloseOnClick",!0)}},{clickToClose:!1});case 2:case"end":return e.stop()}}),e)})))()},onStartReply:function(){this.$emit("startReply",this.comment,this.parentComment)},onLoadMoreReplies:function(){this.$emit("loadMoreReplies",this.comment)}},computed:{isAuthor:function(){return this.comment.Author.Id===_["student"].id},daysSincePublished:function(){return p()(this.comment.PublishDate).fromNow()},isCurrentReplyingTo:function(){return this.comment&&this.currentReplyingComment&&this.comment.Id==this.currentReplyingComment.Id},shouldLoadOlderReplies:function(){return this.comment.ReplyCount>1&&this.comment.Replies&&this.comment.Replies.length<this.comment.ReplyCount},formattedCommentText:function(){return this.comment?w.formatHtmlWithLineBreaks(this.comment.CommentText):""},userAuthorRouter:function(){return y["a"].userProfile.get(this.comment.Author)},userReplyRouter:function(){return y["a"].userProfile.get(this.comment.ReplyTo)}}},E=T,j=(n("56bf"),n("2877")),L=Object(j["a"])(E,l,u,!1,null,"2c8bcd59",null),I=L.exports,M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-comment-editor"},[e("div",{class:{invalid:t.invalid},attrs:{id:"comment-text"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"textarea",staticClass:"test_commentText_input pd-fancy-scroll",class:{replying:t.isReplying},attrs:{placeholder:t.$t("viewer.comments.newComment")},domProps:{value:t.text},on:{keydown:t.onKeydown,input:function(e){e.target.composing||(t.text=e.target.value)}}}),e("transition",{attrs:{name:"pd-fade-transition",duration:100},on:{"before-enter":t.addReplyClass,"after-leave":t.removeReplyClass}},[t.commentReplyingTo?e("div",{staticClass:"mv-reply-box"},[e("span",[t._v(t._s(t.$t("viewer.comments.replyingTo"))+" "),e("strong",[t._v(t._s(t.commentReplyingTo?t.commentReplyingTo.Author.Name:""))])]),e("v-icon",{staticClass:"mv-reply-close",attrs:{size:16},on:{click:t.onStopReply}},[t._v("close")])],1):t._e()])],1),e("div",{staticClass:"validation"},[t.charLimitReached?e("div",{staticClass:"test_character_above_limit pd-caption text-left",class:{invalid:t.invalid},attrs:{id:"field-message"}},[t._v("\n\t\t\t\t"+t._s(t.$t("viewer.comments.charCountLimitReached"))+"\n\t\t\t")]):t._e(),e("div",{staticClass:"test_character_count pd-caption text-right",class:{invalid:t.invalid},attrs:{id:"character-count"}},[t._v("\n\t\t\t\t"+t._s(t.text?t.text.length:0)+"/"+t._s(t.MAX_LENGTH)+"\n\t\t\t")])]),e("pd-button-base",{staticClass:"test_comment_button",attrs:{color:"green",block:"",loading:t.saving},on:{click:t.save}},[t._v("\n\t\t\t"+t._s(t.buttonText)+"\n\t\t")])],1)},S=[],z=n("5b6c"),$=250,N=13,A={name:"MaterialCommentEditor",data:function(){return{MAX_LENGTH:$,text:"",showError:!1,isReplying:!1}},props:{value:{type:String,default:""},saving:{type:Boolean,default:!1},buttonText:{type:String,default:null},commentReplyingTo:{type:Object,default:null}},components:{PdButtonBase:z["a"]},watch:{text:function(t){t!==this.value&&this.$emit("input",t),this.showError=!1},value:function(t){t!==this.text&&(this.text=this.value)},commentReplyingTo:function(){this.focus()}},mounted:function(){this.text=this.value},computed:{invalid:function(){var t;return(null===(t=this.text)||void 0===t?void 0:t.length)>$||this.showError},charLimitReached:function(){var t;return(null===(t=this.text)||void 0===t?void 0:t.length)>$}},methods:{save:function(){var t;null!==(t=this.text)&&void 0!==t&&t.length&&!this.invalid?this.$emit("save"):this.showError=!0},focus:function(){this.$refs.textarea.focus()},onKeydown:function(t){if(t.which===N&&!t.shiftKey)return this.save(),t.preventDefault(),!1},addReplyClass:function(){this.isReplying=!0},removeReplyClass:function(){this.isReplying=!1},onStopReply:function(){this.$emit("stopReply")}}},D=A,G=(n("28f6"),Object(j["a"])(D,M,S,!1,null,"4078fbe1",null)),F=G.exports,B=n("6849"),V=n("1c56"),Y=n("ca2f"),U=n("df4a"),H=n("029e"),q=n("0aba");function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function J(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */J=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(T){c=function(t,e,n){return t[e]=n}}function m(t,e,n,o){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),s=new R(o||[]);return r(i,"_invoke",{value:w(t,n,s)}),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(T){return{type:"throw",arg:T}}}t.wrap=m;var u={};function d(){}function p(){}function f(){}var v={};c(v,a,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(O([])));b&&b!==e&&n.call(b,a)&&(v=b);var y=f.prototype=d.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(r,a,i,s){var c=l(t[r],t,a);if("throw"!==c.type){var m=c.arg,u=m.value;return u&&"object"==K(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(u).then((function(t){m.value=t,i(m)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function w(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return P()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=C(i,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,u;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:p,configurable:!0}),p.displayName=c(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,c(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(x.prototype),c(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(m(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(y),c(y,s,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=O,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function W(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(m){return void n(m)}s.done?e(c):Promise.resolve(c).then(r,o)}function X(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){W(a,r,o,i,s,"next",t)}function s(t){W(a,r,o,i,s,"throw",t)}i(void 0)}))}}function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tt(t,e,n){return e=et(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function et(t){var e=nt(t,"string");return"symbol"===K(e)?e:String(e)}function nt(t,e){if("object"!==K(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var rt=.7,ot=.01,at=10,it=100;function st(t,e,n){return t>=e*n}var ct={name:"MaterialViewerComments",data:function(){return{newComment:"",sending:!1,scrolling:!1,commentReplyingTo:null,parentComment:null,page:0,list:[],loading:!1,canFetchMore:!0,hasScrolled:!1,scrollToCommentId:null,scrollToReplyId:null,shouldMark:!0,loadedReplyPages:{}}},mounted:function(){this.fetchData(),Y["a"].event("Comment View",{materialName:this.material.Name,materialID:this.material.Id,isPremiumContent:this.material.IsPremium,premiumUser:_["student"].IsPremium,count:this.material.CommentCount})},updated:function(){var t=this,e=!!this.scrollCommentIdParam,n=this.scrollToCommentId||this.scrollToReplyId||e,r=this.list&&this.list.length>0,o=n&&!this.hasScrolled&&r;if(o){var a=this.scrollToCommentId||this.scrollCommentIdParam,i="comment".concat(a),s="reply".concat(this.scrollToReplyId),c=function(t){var e=t.$refs[i];return e?e[0]:null},m=function(t){if(!t)return null;var e=t.$refs[s];return e?e[0]:null},l=c(this);this.scrollToReplyId&&(l=m(l)),l&&setTimeout((function(){l.$el.scrollIntoView({behavior:"smooth"}),t.shouldMark&&l.$el.classList.add("mark")}),500),this.hasScrolled=!0}},computed:Z(Z({buttonText:function(){return this.commentReplyingTo?this.$t("viewer.comments.createReply"):this.$t("viewer.comments.createComment")}},Object(s["mapGetters"])({material:"viewer/material"})),{},{scrollCommentIdParam:function(){return this.$route.params.scrollCommentId}}),methods:Z({fetchData:function(){var t=this;return X(J().mark((function e(){return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.canFetchMore){e.next=4;break}return e.next=3,t.fetchNextPage();case 3:t.canFetchMore=e.sent;case 4:case"end":return e.stop()}}),e)})))()},fetchNextPage:function(){var t=this;return X(J().mark((function e(){var n,r,o,a;return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.canFetchMore,e.prev=1,t.loading=!0,r=t.$route.params["parentCommentId"],o=t.$route.params["replyCommentId"],e.next=7,H["a"].getContentComments(t.material.Id,t.page,at);case 7:a=e.sent.Items,m.a.forEach(a,(function(e){return t.loadedReplyPages[e.Id]=0})),t.hasScrolled||!r&&!o||(t.shouldMark=!0,t.scrollToCommentId=r,t.scrollToReplyId=o),t.list=t.list.concat(a),t.page++,n=a.length===at,e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](1);case 17:return e.prev=17,t.loading=!1,e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[1,15,17,21]])})))()},onScroll:m.a.throttle((function(t){var e=t.target,n=e.scrollTop,r=(e.clientHeight,e.scrollHeight);st(n,r,rt)&&!this.loading&&this.fetchData(),this.scrolling=st(n,r,ot)}),it),onStartReply:function(t,e){e==this.parentComment&&t==this.commentReplyingTo?(this.commentReplyingTo=null,this.parentComment=null):(this.commentReplyingTo=t,this.parentComment=e)},submitMessage:function(){var t=this;return X(J().mark((function e(){return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.newComment=t.newComment.trim(),t.newComment.length){e.next=3;break}return e.abrupt("return");case 3:if(t.sending=!0,e.prev=4,!t.commentReplyingTo){e.next=10;break}return e.next=8,t.createNewReply();case 8:e.next=12;break;case 10:return e.next=12,t.createNewComment();case 12:U["a"].success(t.$t("viewer.comments.postSuccess")),e.next=29;break;case 15:if(e.prev=15,e.t0=e["catch"](4),!(e.t0&&e.t0.response&&e.t0.response.status)){e.next=28;break}e.t1=e.t0.response.status,e.next=e.t1===q["a"].Conflict.value?21:e.t1===q["a"].TooManyRequests.value?23:25;break;case 21:return U["a"].error(t.$t("viewer.comments.duplicatedComment")),e.abrupt("break",26);case 23:return U["a"].error(t.$t("common.tooManyRequestsMessage")),e.abrupt("break",26);case 25:U["a"].error(t.$t("common.apiError"));case 26:e.next=29;break;case 28:U["a"].error(t.$t("common.apiError"));case 29:return e.prev=29,t.sending=!1,e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[4,15,29,32]])})))()},createNewReply:function(){var t=this;return X(J().mark((function e(){var n,r,o;return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.parentComment?t.parentComment:t.commentReplyingTo,e.next=3,H["a"].createCommentReply(t.commentReplyingTo.Id,t.newComment);case 3:r=e.sent,o=n.Replies.concat([r]),t.$set(n,"Replies",o),t.$set(n,"ReplyCount",n.ReplyCount+1),t.commentReplyingTo=null,t.newComment=null,t.parentComment=null,t.scrollToContent(n.Id,r.Id),t.updateCommentCount(1),t.trackComment("reply");case 13:case"end":return e.stop()}}),e)})))()},createNewComment:function(){var t=this;return X(J().mark((function e(){var n;return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H["a"].createComment(t.material.Id,t.newComment);case 2:n=e.sent,t.onCommentSubmited(n),t.trackComment("comment");case 5:case"end":return e.stop()}}),e)})))()},trackComment:function(t){Y["a"].event("Comment Create",{eventType:t,materialName:this.material.Name,materialID:this.material.Id,isPremiumContent:this.material.IsPremium,premiumUser:_["student"].IsPremium})},loadRepliesForComment:function(t){var e=this;return X(J().mark((function n(){var r,o,a;return J().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.loadedReplyPages[t.Id],n.next=3,H["a"].getCommentReplies(t.Id,r,at);case 3:o=n.sent.Items,0==r&&e.$set(t,"Replies",[]),a=o.reverse().concat(t.Replies),e.$set(t,"Replies",a),e.loadedReplyPages[t.Id]++;case 8:case"end":return n.stop()}}),n)})))()},onDeleteComment:function(t,e){var n=this;return X(J().mark((function r(){return J().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,n.deleteComment(t,e,X(J().mark((function e(){return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.onCommentDeleted(t);case 1:case"end":return e.stop()}}),e)}))));case 4:case"end":return r.stop()}}),r)})))()},deleteComment:function(t,e,n){var r=this;return X(J().mark((function o(){var a;return J().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=!1,e||!(t.ReplyCount>0)){o.next=7;break}return o.next=4,r.confirmModal("viewer.comments.removeReplies.title","viewer.comments.removeReplies.message","viewer.comments.delete");case 4:a=o.sent,o.next=10;break;case 7:return o.next=9,r.confirmModal("viewer.comments.removeModal.title","viewer.comments.removeModal.message","viewer.comments.delete");case 9:a=o.sent;case 10:if(a){o.next=12;break}return o.abrupt("return");case 12:return o.prev=12,o.next=15,H["a"].deleteComment(t.Id);case 15:return o.next=17,n();case 17:U["a"].success(r.$t("viewer.comments.removeModal.success")),o.next=23;break;case 20:o.prev=20,o.t0=o["catch"](12),U["a"].error(r.$t("common.apiError"));case 23:case"end":return o.stop()}}),o,null,[[12,20]])})))()},confirmModal:function(t,e,n){var r=this;return X(J().mark((function o(){return J().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,g["a"].confirm(r.$t(t),r.$t(e),n?r.$t(n):void 0);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}}),o)})))()},onDeleteReply:function(t,e,n){var r=this;return X(J().mark((function o(){return J().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,r.deleteComment(t,e,X(J().mark((function o(){var a;return J().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!(e.Replies.length<2)){o.next=5;break}return o.next=3,r.loadRepliesForComment(e,n);case 3:o.next=7;break;case 5:a=e.Replies.indexOf(t),e.Replies.splice(a,1);case 7:r.updateCommentCount(-1),e.ReplyCount--;case 9:case"end":return o.stop()}}),o)}))));case 2:case"end":return o.stop()}}),o)})))()},onCommentSubmited:function(t){this.newComment=null,this.updateCommentCount(1),this.list=[t].concat(this.list),this.loadedReplyPages[t.Id]=0,this.scrollToContent(t.Id)},onCommentDeleted:function(t){var e=t.Replies?t.Replies.length:0,n=this.list.indexOf(t);n>=0&&this.list.splice(n,1),this.updateCommentCount(-(e+1)),delete this.loadedReplyPages[t.Id]},scrollToContent:function(t,e){this.shouldScroll=!1,this.hasScrolled=!0,this.scrollToCommentId=t,this.scrollToReplyId=e,this.shouldMark=!1,this.shouldScroll=!0,this.hasScrolled=!1},onStopReply:function(){this.commentReplyingTo=null,this.parentComment=null}},Object(s["mapMutations"])({updateCommentCount:"viewer/UPDATE_MATERIAL_COMMENT_COUNT"})),components:{PdLoader:B["a"],MaterialViewerCommentItem:I,MaterialCommentEditor:F,PdCollapse:V["a"]}},mt=ct,lt=(n("ebb0"),Object(j["a"])(mt,a,i,!1,null,"5a43bafa",null)),ut=lt.exports,dt={name:"CommentMenu",components:{MaterialViewerComments:ut},props:{commentCount:{type:Number},openOnInit:{type:Boolean,default:!1}},data:function(){return{activated:!1,mayCloseOnClick:!0}},mounted:function(){this.activated=this.openOnInit},methods:{onMayCloseOnClick:function(t){this.mayCloseOnClick=t}}},pt=dt,ft=(n("6db9"),Object(j["a"])(pt,r,o,!1,null,"18d7ac40",null));e["a"]=ft.exports},b431:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".mv-comment-editor textarea[data-v-4078fbe1]{border-radius:6px;background:#f6f5f8;width:100%;font-size:.875rem;padding:8px 16px;min-height:90px;max-height:120px;border:1px solid rgba(209,210,211,0)}.mv-comment-editor textarea.replying[data-v-4078fbe1]{min-height:66px;max-height:96px;border-radius:6px 6px 0 0}.mv-comment-editor textarea[data-v-4078fbe1]::-webkit-input-placeholder{color:#90939e}.mv-comment-editor textarea[data-v-4078fbe1]::-moz-placeholder{color:#90939e}.mv-comment-editor textarea[data-v-4078fbe1]:-ms-input-placeholder{color:#90939e}.mv-comment-editor textarea[data-v-4078fbe1]::placeholder{color:#90939e}.mv-comment-editor #comment-text[data-v-4078fbe1]{border-radius:6px;border:1px solid rgba(0,0,0,0)}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]{color:#ce2c10;border-color:#ce2c10}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]::-webkit-input-placeholder{color:#ce2c10}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]::-moz-placeholder{color:#ce2c10}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]:-ms-input-placeholder{color:#ce2c10}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]::placeholder{color:#ce2c10}.mv-comment-editor .mv-reply-box[data-v-4078fbe1]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-bottom-left-radius:6px;border-bottom-right-radius:6px;background:#f6f5f8;padding:2px 8px 2px 16px;height:28px;background-color:#d1d2d3;margin-top:-4px}.mv-comment-editor .mv-reply-box span[data-v-4078fbe1]{font-size:.875rem;color:#90939e}.mv-comment-editor .validation[data-v-4078fbe1]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:16px}.mv-comment-editor .validation #character-count[data-v-4078fbe1],.mv-comment-editor .validation #field-message[data-v-4078fbe1]{width:100%}.mv-comment-editor .validation #character-count.invalid[data-v-4078fbe1],.mv-comment-editor .validation #field-message.invalid[data-v-4078fbe1]{color:#ce2c10}.mv-comment-editor .mv-reply-close[data-v-4078fbe1]{color:#494b56;margin-top:4px}",""])},c645:function(t,e,n){"use strict";n("1320")},d19b:function(t,e,n){"use strict";n("60d5")},ebb0:function(t,e,n){"use strict";n("77f7")},eca1:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".comment-icon-count[data-v-18d7ac40]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mv-comments-menu[data-v-18d7ac40]{width:300px;margin-top:16px;box-shadow:0 1px 3px 0 rgba(0,0,0,.4);border-radius:6px}.comment-icon-count[data-v-18d7ac40]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;line-height:1}.comment-icon-count .pd-icon.comment[data-v-18d7ac40]{font-size:1.25rem}.comment-icon-count .comment-count[data-v-18d7ac40]{margin-left:4px;font-size:1rem}",""])},eef0:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.mv-material-viewer-infobar .mv-infobar-expand-arrow[data-v-9a723350]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mv-material-viewer-container[data-v-9a723350]{position:relative;z-index:5}.mv-material-viewer-container[data-v-9a723350]:after,.mv-material-viewer-container[data-v-9a723350]:before{content:" ";display:table}.mv-material-viewer-infobar-placeholder[data-v-9a723350]{height:70px}.mv-material-viewer-infobar[data-v-9a723350]{padding:10px 20px;background-color:#f6f5f8;box-shadow:1px 1px 3px rgba(0,0,0,.33);transition:all .3s;opacity:0;-ms-transform:translateY(-50px);transform:translateY(-50px)}.mv-material-viewer-infobar.absolute[data-v-9a723350]{position:absolute;left:0;right:0;top:0;pointer-events:none}.mv-material-viewer-infobar.visible[data-v-9a723350]{opacity:1;-ms-transform:translateY(0);transform:translateY(0);pointer-events:auto}.mv-material-viewer-infobar.active[data-v-9a723350]{padding-bottom:20px;z-index:11}.mv-material-viewer-infobar.active .mv-infobar-expand-arrow i[data-v-9a723350]{-ms-transform:translate(-50%,-50%) rotate(180deg);transform:translate(-50%,-50%) rotate(180deg)}.mv-material-viewer-infobar .mv-infobar-main-content[data-v-9a723350]{width:100%}.mv-material-viewer-infobar .mv-infobar-actions[data-v-9a723350]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;color:#494b56;font-size:14px;font-size:.875rem}.mv-material-viewer-infobar .mv-infobar-actions>*[data-v-9a723350]{margin-right:5px;margin-left:25px}.mv-material-viewer-infobar .mv-infobar-actions .pd-icon[data-v-9a723350]{font-size:20px;font-size:1.25rem}.mv-material-viewer-infobar .mv-infobar-actions .user[data-v-9a723350]{border-left:1px solid #d1d2d3;padding-left:25px;margin-left:25px}.mv-material-viewer-infobar .mv-infobar-expand-arrow[data-v-9a723350]{position:absolute;left:50%;bottom:-20px;-ms-transform:translate(-50%);transform:translate(-50%);width:34px;height:34px;cursor:pointer;z-index:1}.mv-material-viewer-infobar .mv-infobar-expand-arrow[data-v-9a723350]:before{content:"";position:absolute;left:50%;bottom:3px;-ms-transform:translate(-50%);transform:translate(-50%);height:19px;width:34px;display:block;border-radius:0 0 17px 17px;box-shadow:0 1px 1px rgba(0,0,0,.33);background-color:#f6f5f8;z-index:1}.mv-material-viewer-infobar .mv-infobar-expand-arrow i[data-v-9a723350]{position:absolute;top:50%;left:50%;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:relative;color:#ff7300;z-index:2}',""])}}]);