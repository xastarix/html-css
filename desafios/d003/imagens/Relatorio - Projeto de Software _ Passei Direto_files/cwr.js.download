/*! License information can be found in LICENSE and LICENSE-THIRD-PARTY */
!function(){var e={914:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(945),o=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var o=this.bufferLength;o<r.BLOCK_SIZE;o++)t.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(o=this.bufferLength;o<r.BLOCK_SIZE-8;o++)t.setUint8(o,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(r.DIGEST_LENGTH);for(o=0;o<8;o++)i[4*o]=this.state[o]>>>24&255,i[4*o+1]=this.state[o]>>>16&255,i[4*o+2]=this.state[o]>>>8&255,i[4*o+3]=this.state[o]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],d=0;d<r.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],h=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,p=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(h+this.temp[d-7]|0)+(p+this.temp[d-16]|0)}var v=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&c^~s&u)|0)+(l+(r.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&o^n&i^o&i)|0;l=u,u=c,c=s,s=a+v|0,a=i,i=o,o=n,n=v+g|0}t[0]+=n,t[1]+=o,t[2]+=i,t[3]+=a,t[4]+=s,t[5]+=c,t[6]+=u,t[7]+=l},e}();t.RawSha256=o},945:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(0,n(655).__exportStar)(n(430),t)},430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(655),o=n(945),i=n(914),a=n(658),s=function(){function e(e){if(this.hash=new i.RawSha256,e){this.outer=new i.RawSha256;var t=function(e){var t=(0,a.convertToBuffer)(e);if(t.byteLength>o.BLOCK_SIZE){var n=new i.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(o.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(o.BLOCK_SIZE);n.set(t);for(var r=0;r<o.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,a.isEmptyData)(e)&&!this.error)try{this.hash.update((0,a.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,this.digestSync()]}))}))},e}();t.Sha256=s},106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var r=n(84),o="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:r.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?o(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}},658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(106);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var o=n(304);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var i=n(174);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return i.numToUint8}})},304:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},84:function(e,t,n){"use strict";n.r(t),n.d(t,{fromUtf8:function(){return r},toUtf8:function(){return o}});var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,63&o|128);else if(n+1<e.length&&55296==(64512&o)&&56320==(64512&e.charCodeAt(n+1))){var i=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(o>>12|224,o>>6&63|128,63&o|128)}return Uint8Array.from(t)}(e)},o=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var o=e[n];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){var i=e[++n];t+=String.fromCharCode((31&o)<<6|63&i)}else if(240<=o&&o<365){var a="%"+[o,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((15&o)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},372:function(e){"use strict";function t(e){return"function"==typeof e}var n=console.error.bind(console);function r(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function o(e){e&&e.logger&&(t(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function i(e,o,i){if(e&&e[o]){if(!i)return n("no wrapper function"),void n((new Error).stack);if(t(e[o])&&t(i)){var a=e[o],s=i(a,o);return r(s,"__original",a),r(s,"__unwrap",(function(){e[o]===s&&r(e,o,a)})),r(s,"__wrapped",!0),r(e,o,s),s}n("original object and wrapper must be functions")}else n("no original function "+o+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}o.wrap=i,o.massWrap=function(e,t,r){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){i(e,t,r)}))})):n("must provide one or more functions to wrap on modules")},o.unwrap=a,o.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):n("must provide one or more functions to unwrap on modules")},e.exports=o},655:function(e,t,n){"use strict";n.r(t),n.d(t,{__extends:function(){return o},__assign:function(){return i},__rest:function(){return a},__decorate:function(){return s},__param:function(){return c},__metadata:function(){return u},__awaiter:function(){return l},__generator:function(){return d},__createBinding:function(){return f},__exportStar:function(){return h},__values:function(){return p},__read:function(){return v},__spread:function(){return g},__spreadArrays:function(){return y},__await:function(){return m},__asyncGenerator:function(){return w},__asyncDelegator:function(){return b},__asyncValues:function(){return E},__makeTemplateObject:function(){return S},__importStar:function(){return C},__importDefault:function(){return T},__classPrivateFieldGet:function(){return x},__classPrivateFieldSet:function(){return I}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function h(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function w(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=o[e](t)).value instanceof m?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function I(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},238:function(e,t,n){var r;!function(o,i){"use strict";var a="function",s="undefined",c="object",u="string",l="model",d="name",f="type",h="vendor",p="version",v="architecture",g="console",y="mobile",m="tablet",w="smarttv",b="wearable",E="embedded",S={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return typeof e===u&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===u?e.replace(/[^\d\.]/g,"").split(".")[0]:i},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof t===s?e:e.substring(0,255)}},C={rgx:function(e,t){for(var n,r,o,s,u,l,d=0;d<t.length&&!u;){var f=t[d],h=t[d+1];for(n=r=0;n<f.length&&!u;)if(u=f[n++].exec(e))for(o=0;o<h.length;o++)l=u[++r],typeof(s=h[o])===c&&s.length>0?2==s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):i:this[s[0]]=l?s[1].call(this,l,s[2]):i:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):i):this[s]=l||i;d+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(S.has(t[n][r],e))return"?"===n?i:n}else if(S.has(t[n],e))return"?"===n?i:n;return e}},T={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},x={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[d,p],[/opios[\/\s]+([\w\.]+)/i],[p,[d,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[p,[d,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[p,[d,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],p],[/focus\/([\w\.]+)/i],[p,[d,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[p,[d,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[p,[d,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[d,p],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[d],[/;fbav\/([\w\.]+);/i],[p,[d,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[d,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[d,p],[/\bgsa\/([\w\.]+)\s.*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[d,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],p],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[p,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[p,d],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[d,[p,C.str,T.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[d,"Netscape"],p],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[p,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[d,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,S.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[v,/ower/,"",S.lowerize]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,S.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[l,[h,"Samsung"],[f,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[l,[h,"Samsung"],[f,y]],[/\((ip(?:hone|od)[\s\w]*);/i],[l,[h,"Apple"],[f,y]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[h,"Apple"],[f,m]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[l,[h,"Huawei"],[f,m]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[l,[h,"Huawei"],[f,y]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[l,/_/g," "],[h,"Xiaomi"],[f,y]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[l,/_/g," "],[h,"Xiaomi"],[f,m]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[l,[h,"OPPO"],[f,y]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[l,[h,"Vivo"],[f,y]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[l,[h,"Realme"],[f,y]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[l,[h,"Motorola"],[f,y]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[h,"Motorola"],[f,m]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[l,[h,"LG"],[f,m]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[l,[h,"LG"],[f,y]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[l,[h,"Lenovo"],[f,m]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[l,/_/g," "],[h,"Nokia"],[f,y]],[/droid.+;\s(pixel\sc)[\s)]/i],[l,[h,"Google"],[f,m]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[l,[h,"Google"],[f,y]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[h,"Sony"],[f,y]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[l,"Xperia Tablet"],[h,"Sony"],[f,m]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[l,[h,"OnePlus"],[f,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[l,[h,"Amazon"],[f,m]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[l,"Fire Phone"],[h,"Amazon"],[f,y]],[/\((playbook);[\w\s\),;-]+(rim)/i],[l,h,[f,m]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[l,[h,"BlackBerry"],[f,y]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[l,[h,"ASUS"],[f,m]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[l,[h,"ASUS"],[f,y]],[/(nexus\s9)/i],[l,[h,"HTC"],[f,m]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[h,[l,/_/g," "],[f,y]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[l,[h,"Acer"],[f,m]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[l,[h,"Meizu"],[f,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[h,l,[f,y]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[h,l,[f,m]],[/\s(surface\sduo)\s/i],[l,[h,"Microsoft"],[f,m]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[l,[h,"Fairphone"],[f,y]],[/\s(u304aa)\sbuild/i],[l,[h,"AT&T"],[f,y]],[/sie-(\w*)/i],[l,[h,"Siemens"],[f,y]],[/[;\/]\s?(rct\w+)\sbuild/i],[l,[h,"RCA"],[f,m]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[l,[h,"Dell"],[f,m]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[l,[h,"Verizon"],[f,m]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[l,[h,"Barnes & Noble"],[f,m]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[l,[h,"NuVision"],[f,m]],[/;\s(k88)\sbuild/i],[l,[h,"ZTE"],[f,m]],[/;\s(nx\d{3}j)\sbuild/i],[l,[h,"ZTE"],[f,y]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[l,[h,"Swiss"],[f,y]],[/[;\/]\s?(zur\d{3})\sbuild/i],[l,[h,"Swiss"],[f,m]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[l,[h,"Zeki"],[f,m]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[h,"Dragon Touch"],l,[f,m]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[l,[h,"Insignia"],[f,m]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[l,[h,"NextBook"],[f,m]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[h,"Voice"],l,[f,y]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[h,"LvTel"],l,[f,y]],[/;\s(ph-1)\s/i],[l,[h,"Essential"],[f,y]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[l,[h,"Envizen"],[f,m]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[l,[h,"MachSpeed"],[f,m]],[/[;\/]\s?tu_(1491)\sbuild/i],[l,[h,"Rotor"],[f,m]],[/(shield[\w\s]+)\sbuild/i],[l,[h,"Nvidia"],[f,m]],[/(sprint)\s(\w+)/i],[h,l,[f,y]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,"Microsoft"],[f,y]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[h,"Zebra"],[f,m]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[h,"Zebra"],[f,y]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[h,l,[f,g]],[/droid.+;\s(shield)\sbuild/i],[l,[h,"Nvidia"],[f,g]],[/(playstation\s[345portablevi]+)/i],[l,[h,"Sony"],[f,g]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[l,[h,"Microsoft"],[f,g]],[/smart-tv.+(samsung)/i],[h,[f,w]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,"Samsung"],[f,w]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[h,"LG"],[f,w]],[/(apple)\s?tv/i],[h,[l,"Apple TV"],[f,w]],[/crkey/i],[[l,"Chromecast"],[h,"Google"],[f,w]],[/droid.+aft([\w])(\sbuild\/|\))/i],[l,[h,"Amazon"],[f,w]],[/\(dtv[\);].+(aquos)/i],[l,[h,"Sharp"],[f,w]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[h,S.trim],[l,S.trim],[f,w]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[f,w]],[/((pebble))app\/[\d\.]+\s/i],[h,l,[f,b]],[/droid.+;\s(glass)\s\d/i],[l,[h,"Google"],[f,b]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[l,[h,"Zebra"],[f,b]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[h,[f,E]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[l,[f,y]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[l,[f,m]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[f,S.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[l,[h,"Generic"]],[/(phone)/i],[[f,y]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[d,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[d,[p,C.str,T.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[p,C.str,T.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[d,p],[/(sunos)\s?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[d,p]]},I=function(e,t){if("object"==typeof e&&(t=e,e=i),!(this instanceof I))return new I(e,t).getResult();var n=e||(void 0!==o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),r=t?S.extend(x,t):x;return this.getBrowser=function(){var e={name:i,version:i};return C.rgx.call(e,n,r.browser),e.major=S.major(e.version),e},this.getCPU=function(){var e={architecture:i};return C.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:i,model:i,type:i};return C.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:i,version:i};return C.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:i,version:i};return C.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===u&&e.length>255?S.trim(e,255):e,this},this.setUA(n),this};I.VERSION="0.7.28",I.BROWSER={NAME:d,MAJOR:"major",VERSION:p},I.CPU={ARCHITECTURE:v},I.DEVICE={MODEL:l,VENDOR:h,TYPE:f,CONSOLE:g,MOBILE:y,SMARTTV:w,TABLET:m,WEARABLE:b,EMBEDDED:E},I.ENGINE={NAME:d,VERSION:p},I.OS={NAME:d,VERSION:p},typeof t!==s?(e.exports&&(t=e.exports=I),t.UAParser=I):(r=function(){return I}.call(t,n,t,e))===i||(e.exports=r);var k=void 0!==o&&(o.jQuery||o.Zepto);if(k&&!k.ua){var A=new I;k.ua=A.getResult(),k.ua.get=function(){return A.getUA()},k.ua.set=function(e){A.setUA(e);var t=A.getResult();for(var n in t)k.ua[n]=t[n]}}}("object"==typeof window?window:this)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};Object.create;function t(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}Object.create;var r=function(){function n(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?"".concat(e.protocol,":"):e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/".concat(e.path):e.path:"/"}return n.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},n.prototype.clone=function(){var r,o=new n(e(e({},this),{headers:e({},this.headers)}));return o.query&&(o.query=(r=o.query,Object.keys(r).reduce((function(n,o){var i,a=r[o];return e(e({},n),((i={})[o]=Array.isArray(a)?function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],t(a),!1):a,i))}),{}))),o},n}();var o=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=function(e){var t=this;this.getId=function(e){return i(t,void 0,void 0,(function(){var t,n;return a(this,(function(r){return t=JSON.stringify(e),n=this.getHttpRequest("AWSCognitoIdentityService.GetId",t),[2,this.fetchRequestHandler.handle(n).then((function(e){return e.response.body.getReader().read().then((function(e){var t=e.value;return JSON.parse(String.fromCharCode.apply(null,t))}))})).catch((function(){throw new Error("CWR: Failed to retrieve Cognito identity")}))]}))}))},this.getOpenIdToken=function(e){return i(t,void 0,void 0,(function(){var t,n;return a(this,(function(r){return t=JSON.stringify(e),n=this.getHttpRequest("AWSCognitoIdentityService.GetOpenIdToken",t),[2,this.fetchRequestHandler.handle(n).then((function(e){return e.response.body.getReader().read().then((function(e){var t=e.value;return JSON.parse(String.fromCharCode.apply(null,t))}))})).catch((function(){throw new Error("CWR: Failed to retrieve Cognito OpenId token")}))]}))}))},this.getCredentialsForIdentity=function(e){return i(t,void 0,void 0,(function(){var t,n;return a(this,(function(r){return t=JSON.stringify({IdentityId:e}),n=this.getHttpRequest("AWSCognitoIdentityService.GetCredentialsForIdentity",t),[2,this.fetchRequestHandler.handle(n).then((function(e){return e.response.body.getReader().read().then((function(e){var t=e.value,n=JSON.parse(String.fromCharCode.apply(null,t)),r=n.IdentityId,o=n.Credentials,i=o.AccessKeyId,a=o.Expiration;return{identityId:r,accessKeyId:i,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:new Date(1e3*a)}}))})).catch((function(){throw new Error("CWR: Failed to retrieve credentials for Cognito identity")}))]}))}))},this.getHttpRequest=function(e,n){return new r({method:"POST",headers:{"content-type":"application/x-amz-json-1.1","x-amz-target":e},protocol:"https:",hostname:t.hostname,body:n})},this.hostname="cognito-identity."+e.region+".amazonaws.com",this.fetchRequestHandler=e.fetchRequestHandler};function c(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}Object.create;function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;Object.create;function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;var f=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,h)},h=function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())};function p(e){var t,n,r=[];try{for(var o=d(Object.keys(e).sort()),i=o.next();!i.done;i=o.next()){var a=i.value,s=e[a];if(a=f(a),Array.isArray(s))for(var c=0,u=s.length;c<u;c++)r.push("".concat(a,"=").concat(f(s[c])));else{var l=a;(s||"string"==typeof s)&&(l+="=".concat(f(s))),r.push(l)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r.join("&")}for(var v=function(){function e(e){var t=this;"function"==typeof e?this.configProvider=function(){return c(t,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,e()];case 1:return[2,t.sent()||{}]}}))}))}:this.config=null!=e?e:{}}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal;return c(this,void 0,void 0,(function(){var t,r,i,a,s,c,d,f,h,v,g,y;return u(this,(function(u){switch(u.label){case 0:return this.config||!this.configProvider?[3,2]:(t=this,[4,this.configProvider()]);case 1:t.config=u.sent(),u.label=2;case 2:return r=this.config.requestTimeout,(null==n?void 0:n.aborted)?((i=new Error("Request aborted")).name="AbortError",[2,Promise.reject(i)]):(a=e.path,e.query&&(s=p(e.query))&&(a+="?".concat(s)),c=e.port,d=e.method,f="".concat(e.protocol,"//").concat(e.hostname).concat(c?":".concat(c):"").concat(a),h="GET"===d||"HEAD"===d?void 0:e.body,v={body:h,headers:new Headers(e.headers),method:d},"undefined"!=typeof AbortController&&(v.signal=n),g=new Request(f,v),y=[fetch(g).then((function(e){var t,n,r=e.headers,i={};try{for(var a=l(r.entries()),s=a.next();!s.done;s=a.next()){var c=s.value;i[c[0]]=c[1]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new o({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new o({headers:i,statusCode:e.status,body:t})}}))})),(m=r,void 0===m&&(m=0),new Promise((function(e,t){m&&setTimeout((function(){var e=new Error("Request did not complete within ".concat(m," ms"));e.name="TimeoutError",t(e)}),m)})))],n&&y.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),[2,Promise.race(y)])}var m}))}))},e}(),g={},y=new Array(64),m=0,w="A".charCodeAt(0),b="Z".charCodeAt(0);m+w<=b;m++){var E=String.fromCharCode(m+w);g[E]=m,y[m]=E}for(m=0,w="a".charCodeAt(0),b="z".charCodeAt(0);m+w<=b;m++){E=String.fromCharCode(m+w);var S=m+26;g[E]=S,y[S]=E}for(m=0;m<10;m++){g[m.toString(10)]=m+52;E=m.toString(10),S=m+52;g[E]=S,y[S]=E}g["+"]=62,y[62]="+",g["/"]=63,y[63]="/";var C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)},T=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},I=function(e){var t=this;this.assumeRoleWithWebIdentity=function(e){return T(t,void 0,void 0,(function(){var t,n,o;return x(this,(function(i){return t=C(C({},e),{Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),n=new URLSearchParams(Object.entries(t)).toString(),o=new r({method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",host:this.hostname},protocol:"https:",hostname:this.hostname,body:n}),[2,this.fetchRequestHandler.handle(o).then((function(e){return e.response.body.getReader().read().then((function(e){var t=e.value,n=String.fromCharCode.apply(null,t);return{accessKeyId:n.split("<AccessKeyId>")[1].split("</AccessKeyId>")[0],secretAccessKey:n.split("<SecretAccessKey>")[1].split("</SecretAccessKey>")[0],sessionToken:n.split("<SessionToken>")[1].split("</SessionToken>")[0],expiration:new Date(n.split("<Expiration>")[1].split("</Expiration>")[0])}}))})).catch((function(){throw new Error("CWR: Failed to retrieve credentials from STS")}))]}))}))},this.hostname="sts."+e.region+".amazonaws.com",this.fetchRequestHandler=e.fetchRequestHandler},k="cwr_c",A="cwr_s",O="cwr_u",P=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},_=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},L=function(){function e(e){var t=this;this.ChainAnonymousCredentialsProvider=function(){return P(t,void 0,void 0,(function(){return _(this,(function(e){return[2,this.AnonymousCredentialsProvider().catch(this.AnonymousStorageCredentialsProvider).catch(this.AnonymousCognitoCredentialsProvider)]}))}))},this.AnonymousCredentialsProvider=function(){return P(t,void 0,void 0,(function(){var e=this;return _(this,(function(t){return[2,new Promise((function(t,n){if(e.renewCredentials())return n();t(e.credentials)}))]}))}))},this.AnonymousStorageCredentialsProvider=function(){return P(t,void 0,void 0,(function(){var e=this;return _(this,(function(t){return[2,new Promise((function(t,n){var r;try{r=JSON.parse(localStorage.getItem(k))}catch(e){return n()}if(r.expiration=new Date(r.expiration),e.credentials=r,e.renewCredentials())return n();e.credentials=r,t(r)}))]}))}))},this.AnonymousCognitoCredentialsProvider=function(){return P(t,void 0,void 0,(function(){var e=this;return _(this,(function(t){return[2,this.cognitoIdentityClient.getId({IdentityPoolId:this.config.identityPoolId}).then((function(t){return e.cognitoIdentityClient.getOpenIdToken(t)})).then((function(t){return e.stsClient.assumeRoleWithWebIdentity({RoleArn:e.config.guestRoleArn,RoleSessionName:"cwr",WebIdentityToken:t.Token})})).then((function(t){e.credentials=t;try{localStorage.setItem(k,JSON.stringify(t))}catch(e){}return t}))]}))}))};var n=e.identityPoolId.split(":")[0];this.config=e,this.stsClient=new I({fetchRequestHandler:new v,region:n}),this.cognitoIdentityClient=new s({fetchRequestHandler:new v,region:n})}return e.prototype.renewCredentials=function(){if(!this.credentials||!this.credentials.expiration)return!0;var e=new Date(this.credentials.expiration.getTime()-3e4);return new Date>e},e}(),R=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},M=function(){function e(e){var t=this;this.ChainAnonymousCredentialsProvider=function(){return R(t,void 0,void 0,(function(){return j(this,(function(e){return[2,this.AnonymousCredentialsProvider().catch(this.AnonymousStorageCredentialsProvider).catch(this.AnonymousCognitoCredentialsProvider)]}))}))},this.AnonymousCredentialsProvider=function(){return R(t,void 0,void 0,(function(){var e=this;return j(this,(function(t){return[2,new Promise((function(t,n){if(e.renewCredentials())return n();t(e.credentials)}))]}))}))},this.AnonymousStorageCredentialsProvider=function(){return R(t,void 0,void 0,(function(){var e=this;return j(this,(function(t){return[2,new Promise((function(t,n){var r;try{r=JSON.parse(localStorage.getItem(k))}catch(e){n()}if(r.expiration=new Date(r.expiration),e.credentials=r,e.renewCredentials())return n();e.credentials=r,t(r)}))]}))}))},this.AnonymousCognitoCredentialsProvider=function(){return R(t,void 0,void 0,(function(){var e=this;return j(this,(function(t){var n;return n={client:this.cognitoIdentityClient,identityPoolId:this.config.identityPoolId},[2,function(){return n.client.getCredentialsForIdentity(n.identityPoolId)}().then((function(t){e.credentials=t;try{localStorage.setItem(k,JSON.stringify(t))}catch(e){}return t}))]}))}))};var n=e.identityPoolId.split(":")[0];this.config=e,this.cognitoIdentityClient=new s({fetchRequestHandler:new v,region:n})}return e.prototype.renewCredentials=function(){if(!this.credentials||!this.credentials.expiration)return!0;var e=new Date(this.credentials.expiration.getTime()-3e4);return new Date>e},e}(),H=function(){function e(e){this.plugins=new Map,this.context=e}return e.prototype.addPlugin=function(e){var t=e.getPluginId();if(!t)throw new Error("InvalidPluginIdException");this.plugins.set(t,e),e.load(this.context)},e.prototype.updatePlugin=function(e,t){var n=this.plugins.get(e);n&&n.update instanceof Function&&n.update(t)},e.prototype.enable=function(){this.plugins.forEach((function(e){return e.enable()}))},e.prototype.disable=function(){this.plugins.forEach((function(e){return e.disable()}))},e.prototype.hasPlugin=function(e){return this.plugins.has(e)},e.prototype.record=function(e,t){var n=this.plugins.get(e);if(!(n&&n.record instanceof Function))throw new Error("AWS RUM Client record: Invalid plugin ID");n.record(t)},e}(),D="com.amazon.rum.http_event",q="com.amazon.rum.xray_trace_event",B="com.amazon.rum.performance_navigation_event",N=function(){return N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},N.apply(this,arguments)},z="com.amazonaws.rum.dom-event",U={enableMutationObserver:!1,events:[]},F=function(){function e(e){this.pluginId=z,this.eventListenerMap=new Map,this.config=N(N({},U),e),this.enabled=!1}return e.prototype.load=function(e){this.recordEvent=e.record,this.enable()},e.prototype.enable=function(){var e=this;"complete"===document.readyState?this.enabled||(this.addListeners(),this.config.enableMutationObserver&&this.observeDOMMutation(),this.enabled=!0):window.addEventListener("load",(function(){return e.enable()}))},e.prototype.disable=function(){this.enabled&&(this.removeListeners(),this.observer&&this.observer.disconnect(),this.enabled=!1)},e.prototype.getPluginId=function(){return this.pluginId},e.prototype.update=function(e){var t=this;e.forEach((function(e){t.addEventHandler(e),t.config.events.push(e)}))},e.prototype.removeListeners=function(){var e=this;this.config.events.forEach((function(t){return e.removeEventHandler(t)}))},e.prototype.addListeners=function(){var e=this;this.config.events.forEach((function(t){return e.addEventHandler(t)}))},e.prototype.getEventListener=function(e){var t=this;return function(n){var r={version:"1.0.0",event:n.type,elementId:t.getElementId(n)};void 0!==e&&(r.cssLocator=e),t.recordEvent&&t.recordEvent("com.amazon.rum.dom_event",r)}},e.prototype.getElementId=function(e){return e.target?e.target instanceof Element&&e.target.id?e.target.id:e.target instanceof Node?e.target.nodeName:"":""},e.prototype.addEventHandler=function(e){var t=e.event,n=this.getEventListener(e.cssLocator),r=[],o=this.eventListenerMap.has(e)?this.eventListenerMap.get(e):[];if(e.cssLocator)document.querySelectorAll(e.cssLocator).forEach((function(e){r.push(e)}));else if(e.elementId){var i=document.getElementById(e.elementId);i&&r.push(i)}else e.element&&r.push(e.element);r.forEach((function(e){e.addEventListener(t,n),o.push({element:e,eventListener:n})})),this.eventListenerMap.set(e,o)},e.prototype.removeEventHandler=function(e){var t=this.eventListenerMap.get(e);t&&(t.forEach((function(t){var n=t.element,r=t.eventListener;n.removeEventListener(e.event,r)})),this.eventListenerMap.delete(e))},e.prototype.observeDOMMutation=function(){var e=this;this.observer=new MutationObserver((function(){e.removeListeners(),e.addListeners()})),this.observer.observe(document,{childList:!0,subtree:!0})},e}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}var V,G=function(e){return e!==Object(e)&&null!=e},X=function(e,t){var n=function(e){var t={version:"1.0.0",type:"undefined",message:"undefined"};return void 0!==e.type&&(t.type=e.type),void 0!==e.message&&(t.message=e.message),void 0!==e.filename&&(t.filename=e.filename),void 0!==e.lineno&&(t.lineno=e.lineno),void 0!==e.colno&&(t.colno=e.colno),t}(e),r=e.error;return!function(e){var t=W(e);return("object"===t||"function"===t)&&!!e}(r)?G(r)&&function(e,t){"unhandledrejection"!==e.type&&(e.type=t.toString()),e.message=t.toString()}(n,r):function(e,t,n){t.name&&(e.type=t.name),t.message&&(e.message=t.message),t.fileName&&(e.filename=t.fileName),t.lineNumber&&(e.lineno=t.lineNumber),t.columnNumber&&(e.colno=t.columnNumber),n&&t.stack&&(e.stack=t.stack.length>n?t.stack.substring(0,n)+"...":t.stack)}(n,r,t),n},K=function(){return K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},K.apply(this,arguments)},Z="com.amazonaws.rum.js-error",J={stackTraceLength:200},Y=function(){function e(e){var t=this;this.eventHandler=function(e){t.recordEvent("com.amazon.rum.js_error_event",X(e,t.config.stackTraceLength))},this.promiseRejectEventHandler=function(e){t.eventHandler({type:e.type,error:e.reason})},this.pluginId=Z,this.enabled=!0,this.config=K(K({},J),e)}return e.prototype.load=function(e){this.recordEvent=e.record,this.addEventHandler()},e.prototype.enable=function(){this.enabled||(this.addEventHandler(),this.enabled=!0)},e.prototype.disable=function(){this.enabled&&(this.removeEventHandler(),this.enabled=!1)},e.prototype.getPluginId=function(){return this.pluginId},e.prototype.record=function(e){e instanceof ErrorEvent?this.eventHandler(e):this.eventHandler({type:"error",error:e})},e.prototype.addEventHandler=function(){window.addEventListener("error",this.eventHandler),window.addEventListener("unhandledrejection",this.promiseRejectEventHandler)},e.prototype.removeEventHandler=function(){window.removeEventListener("error",this.eventHandler),window.removeEventListener("unhandledrejection",this.promiseRejectEventHandler)},e}(),$=function(e,t,n,r,o){var i=e+"=";i+=t||"",void 0!==o?i+="; Expires="+o.toUTCString():void 0!==r&&(i+="; Expires="+Q(r).toUTCString()),i+="; Domain="+n.domain,i+="; Path="+n.path,i+="; SameSite="+n.sameSite,i+=n.secure?"; Secure":"",document.cookie=i},Q=function(e){return new Date((new Date).getTime()+1e3*e)},ee=function(e){for(var t=0,n=document.cookie.split("; ");t<n.length;t++){var r=n[t].split("=");if(r[0]===e)return r[1]}return""},te=new Uint8Array(16);function ne(){if(!V&&!(V="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return V(te)}var re=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var oe=function(e){return"string"==typeof e&&re.test(e)},ie=[],ae=0;ae<256;++ae)ie.push((ae+256).toString(16).substr(1));var se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ie[e[t+0]]+ie[e[t+1]]+ie[e[t+2]]+ie[e[t+3]]+"-"+ie[e[t+4]]+ie[e[t+5]]+"-"+ie[e[t+6]]+ie[e[t+7]]+"-"+ie[e[t+8]]+ie[e[t+9]]+"-"+ie[e[t+10]]+ie[e[t+11]]+ie[e[t+12]]+ie[e[t+13]]+ie[e[t+14]]+ie[e[t+15]]).toLowerCase();if(!oe(n))throw TypeError("Stringified UUID is invalid");return n};for(var ce,ue=function(e,t,n){var r=(e=e||{}).random||(e.rng||ne)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return se(r)},le=n(238),de="00000000-0000-0000-0000-000000000000",fe="unknown",he=function(){function e(e,t,n,r){this.appMonitorDetails=e,this.config=t,this.record=n,this.pageManager=r,this.session={sessionId:de,record:this.sample(),eventCount:0},this.initializeUser(),this.collectAttributes(),this.getSessionFromCookie()}return e.prototype.getSession=function(){return this.session.sessionId===de||this.useCookies()?(this.session.sessionId===de&&this.useCookies()||this.session.sessionId!==de&&new Date>this.sessionExpiry)&&this.createSession():this.session={sessionId:de,record:this.sample(),eventCount:0,page:this.session.page},this.session},e.prototype.getAttributes=function(){return this.attributes},e.prototype.getUserId=function(){return this.useCookies()?this.userId:de},e.prototype.incrementSessionEventCount=function(){this.session.eventCount++,this.renewSession()},e.prototype.initializeUser=function(){var e="";this.userExpiry=new Date,this.userExpiry.setDate(this.userExpiry.getDate()+this.config.userIdRetentionDays),this.config.userIdRetentionDays<=0?this.userId="00000000-0000-0000-0000-000000000000":this.useCookies()?(e=this.getUserIdCookie(),this.userId=e||ue(),this.createOrRenewUserCookie(e,this.userExpiry)):this.userId=ue()},e.prototype.createOrRenewSessionCookie=function(e,t){btoa&&$(this.sessionCookieName(),btoa(JSON.stringify(e)),this.config.cookieAttributes,void 0,t)},e.prototype.createOrRenewUserCookie=function(e,t){$(O,e,this.config.cookieAttributes,void 0,t)},e.prototype.getUserIdCookie=function(){return ee(O)},e.prototype.getSessionFromCookie=function(){if(this.useCookies()){var e=ee(this.sessionCookieName());if(e&&atob)try{this.session=JSON.parse(atob(e)),this.pageManager.resumeSession(this.session.page.pageId,this.session.page.interaction)}catch(e){}}},e.prototype.storeSessionAsCookie=function(){this.useCookies()&&this.config.userIdRetentionDays>0&&this.createOrRenewUserCookie(this.userId,this.userExpiry),this.useCookies()&&this.createOrRenewSessionCookie(this.session,this.sessionExpiry)},e.prototype.createSession=function(){this.session={sessionId:ue(),record:this.sample(),eventCount:0},this.session.page=this.pageManager.getPage(),this.sessionExpiry=new Date((new Date).getTime()+1e3*this.config.sessionLengthSeconds),this.storeSessionAsCookie(),this.record(this.session,"com.amazon.rum.session_start_event",{version:"1.0.0"})},e.prototype.renewSession=function(){this.sessionExpiry=new Date((new Date).getTime()+1e3*this.config.sessionLengthSeconds),this.session.page=this.pageManager.getPage(),this.storeSessionAsCookie()},e.prototype.collectAttributes=function(){var e=new le.UAParser(navigator.userAgent).getResult();this.attributes={browserLanguage:navigator.language,browserName:e.browser.name?e.browser.name:fe,browserVersion:e.browser.version?e.browser.version:fe,osName:e.os.name?e.os.name:fe,osVersion:e.os.version?e.os.version:fe,deviceType:e.device.type?e.device.type:"desktop",platformType:"web",domain:window.location.hostname}},e.prototype.useCookies=function(){return navigator.cookieEnabled&&this.config.allowCookies},e.prototype.sample=function(){return Math.random()<this.config.sessionSampleRate},e.prototype.sessionCookieName=function(){return this.config.cookieAttributes.unique?"cwr_s_"+this.appMonitorDetails.id:A},e}(),pe=n(372),ve=function(){function e(){this.enabled=!1}return e.prototype.enable=function(){if(!this.enabled){this.enabled=!0;for(var e=0,t=this.patches();e<t.length;e++){var n=t[e];pe.wrap(n.nodule,n.name,n.wrapper())}}},e.prototype.disable=function(){if(this.enabled){this.enabled=!1;for(var e=0,t=this.patches();e<t.length;e++){var n=t[e];pe.unwrap(n.nodule,n.name)}}},e}(),ge=(ce=function(e,t){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},ce(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ce(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ye=function(e){function t(t,n,r){var o=e.call(this)||this;return o.sendWrapper=function(){var e=o;return function(t){return function(){return e.recordXhr(this),this.addEventListener("loadend",e.endTracking),t.apply(this,arguments)}}},o.endTracking=function(e){var t=Date.now(),n=e.target;n.removeEventListener("loadend",o.endTracking),o.removeXhr(n,t)},o.fetch=function(e,t,n,r,i){return e.apply(t,n).catch((function(e){throw e})).finally(o.decrementFetchCounter)},o.fetchWrapper=function(){var e=o;return function(t){return function(n,r){return e.fetchCounter+=1,e.fetch(t,this,arguments,n,r)}}},o.decrementFetchCounter=function(){o.isPageLoaded||(o.latestEndTime=Date.now()),o.fetchCounter-=1},o.checkLoadStatus=function(){0===o.ongoingRequests.size&&0===o.fetchCounter&&(clearInterval(o.periodicCheckerId),clearTimeout(o.timeoutCheckerId),o.domMutationObserver.disconnect(),o.recordRouteChangeNavigationEvent(o.pageManager.getPage()),o.periodicCheckerId=void 0,o.timeoutCheckerId=void 0,o.isPageLoaded=!0)},o.declareTimeout=function(){clearInterval(o.periodicCheckerId),o.periodicCheckerId=void 0,o.timeoutCheckerId=void 0,o.domMutationObserver.disconnect(),o.isPageLoaded=!0},o.resetInterval=function(){o.latestEndTime=Date.now(),clearInterval(o.periodicCheckerId),o.periodicCheckerId=setInterval(o.checkLoadStatus,o.config.routeChangeComplete)},o.moveItemsFromBuffer=function(e){o.ongoingRequests.add(e)},o.updateLatestInteractionTime=function(e){o.latestInteractionTime=Date.now()},o.periodicCheckerId=void 0,o.timeoutCheckerId=void 0,o.domMutationObserver=new MutationObserver(o.resetInterval),o.ongoingRequests=new Set,o.requestBuffer=new Set,o.fetchCounter=0,o.isPageLoaded=!0,o.latestEndTime=0,o.latestInteractionTime=0,o.config=n,o.pageManager=t,o.record=r,o.enable(),document.addEventListener("mousedown",o.updateLatestInteractionTime),document.addEventListener("keydown",o.updateLatestInteractionTime),o}return ge(t,e),t.prototype.startTiming=function(){this.latestEndTime=Date.now(),this.periodicCheckerId&&clearInterval(this.periodicCheckerId),this.timeoutCheckerId&&clearTimeout(this.timeoutCheckerId),this.domMutationObserver.disconnect(),this.periodicCheckerId=setInterval(this.checkLoadStatus,this.config.routeChangeComplete),this.timeoutCheckerId=setTimeout(this.declareTimeout,this.config.routeChangeTimeout),this.domMutationObserver.observe(document,{subtree:!0,childList:!0,attributes:!1,characterData:!1}),this.isPageLoaded=!1,this.requestBuffer.forEach(this.moveItemsFromBuffer),this.requestBuffer.clear()},t.prototype.patches=function(){return[{nodule:XMLHttpRequest.prototype,name:"send",wrapper:this.sendWrapper},{nodule:window,name:"fetch",wrapper:this.fetchWrapper}]},t.prototype.recordXhr=function(e){this.pageManager.getPage()&&!1===this.isPageLoaded?this.ongoingRequests.add(e):this.requestBuffer.add(e)},t.prototype.removeXhr=function(e,t){this.pageManager.getPage()&&this.ongoingRequests.has(e)?(this.ongoingRequests.delete(e),this.latestEndTime=t):this.requestBuffer.has(e)&&this.requestBuffer.delete(e)},t.prototype.recordRouteChangeNavigationEvent=function(e){var t={version:"1.0.0",initiatorType:"route_change",navigationType:"navigate",startTime:e.start,duration:this.latestEndTime-e.start};this.record&&this.record(B,t)},t}(ve),me=function(){function e(e,t){this.TIMEOUT=1e3,this.config=e,this.record=t,this.page=void 0,this.resumed=void 0,this.recordInteraction=!1,this.virtualPageLoadTimer=new ye(this,e,t)}return e.prototype.getPage=function(){return this.page},e.prototype.getAttributes=function(){return this.attributes},e.prototype.resumeSession=function(e,t){this.recordInteraction=!0,this.resumed={pageId:e,interaction:t,start:0}},e.prototype.recordPageView=function(e){var t;if(t="string"==typeof e?e:e.pageId,this.useCookies()&&(this.recordInteraction=!0),!this.page&&this.resumed)this.createResumedPage(t);else if(this.page){if(this.page.pageId===t)return;this.createNextPage(t)}else this.createLandingPage(t);this.collectAttributes("object"===W(e)?e:void 0),this.recordPageViewEvent()},e.prototype.createResumedPage=function(e){this.page={pageId:e,parentPageId:this.resumed.pageId,interaction:this.resumed.interaction+1,start:Date.now()},this.resumed=void 0},e.prototype.createNextPage=function(e){var t=Date.now(),n=this.virtualPageLoadTimer.latestInteractionTime;t-n<=this.TIMEOUT&&(t=n,this.virtualPageLoadTimer.startTiming()),this.page={pageId:e,parentPageId:this.page.pageId,interaction:this.page.interaction+1,start:t}},e.prototype.createLandingPage=function(e){this.page={pageId:e,interaction:0,start:Date.now()}},e.prototype.collectAttributes=function(e){var t=this;this.attributes={title:document.title,pageId:this.page.pageId},this.recordInteraction&&(this.attributes.interaction=this.page.interaction,void 0!==this.page.parentPageId&&(this.attributes.parentPageId=this.page.parentPageId)),e&&Object.keys(e).forEach((function(n){t.attributes[n]=e[n]}))},e.prototype.createPageViewEvent=function(){var e={version:"1.0.0",pageId:this.page.pageId};return this.recordInteraction&&(e.interaction=this.page.interaction,e.pageInteractionId=this.page.pageId+"-"+this.page.interaction,void 0!==this.page.parentPageId&&(e.parentPageInteractionId=this.page.parentPageId+"-"+(this.page.interaction-1))),e},e.prototype.recordPageViewEvent=function(){this.record("com.amazon.rum.page_view_event",this.createPageViewEvent())},e.prototype.useCookies=function(){return navigator.cookieEnabled&&this.config.allowCookies},e}(),we=function(){return we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},we.apply(this,arguments)},be=function(){function e(e,t){var n=this;this.events=[],this.recordPageView=function(e){n.isCurrentUrlAllowed()&&n.pageManager.recordPageView(e)},this.recordEvent=function(e,t){if(n.enabled&&n.isCurrentUrlAllowed()){var r=n.sessionManager.getSession();n.sessionManager.incrementSessionEventCount(),n.canRecord(r)&&n.addRecordToCache(e,t)}},this.getSession=function(){if(n.isCurrentUrlAllowed())return n.sessionManager.getSession()},this.recordSessionInitEvent=function(e,t,r){n.enabled&&(n.sessionManager.incrementSessionEventCount(),n.canRecord(e)&&n.addRecordToCache(t,r))},this.canRecord=function(e){return e.record&&(e.eventCount<=n.config.sessionEventLimit||n.config.sessionEventLimit<=0)},this.addRecordToCache=function(e,t){if(n.enabled){n.events.length===n.config.eventCacheSize&&n.events.shift();var r=we(we({version:"1.0.0"},n.sessionManager.getAttributes()),n.pageManager.getAttributes());n.events.push({details:JSON.stringify(t),id:ue(),metadata:JSON.stringify(r),timestamp:new Date,type:e})}},this.appMonitorDetails=e,this.config=t,this.enabled=!0,this.pageManager=new me(t,this.recordEvent),this.sessionManager=new he(e,t,this.recordSessionInitEvent,this.pageManager)}return e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.hasEvents=function(){return 0!==this.events.length},e.prototype.getEventBatch=function(){var e=[];return 0===this.events.length||(this.events.length<=this.config.batchLimit?(e=this.events,this.events=[]):e=this.events.splice(0,this.config.batchLimit)),e},e.prototype.getAppMonitorDetails=function(){return this.appMonitorDetails},e.prototype.getUserDetails=function(){return{userId:this.sessionManager.getUserId(),sessionId:this.sessionManager.getSession().sessionId}},e.prototype.isCurrentUrlAllowed=function(){var e=document.location.toString();return!(this.config.pagesToExclude.length>0&&this.config.pagesToExclude.some((function(t){return t.test(e)})))&&(!(this.config.pagesToInclude.length&&!this.config.pagesToInclude.some((function(t){return t.test(e)})))||void 0)},e}(),Ee={},Se={},Ce=0;Ce<256;Ce++){var Te=Ce.toString(16).toLowerCase();1===Te.length&&(Te="0".concat(Te)),Ee[Ce]=Te,Se[Te]=Ce}function xe(e){for(var t="",n=0;n<e.byteLength;n++)t+=Ee[e[n]];return t}var Ie=function(){return Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ie.apply(this,arguments)};function ke(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function Ae(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}Object.create;function Oe(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}Object.create;var _e,Le=function(e){if("function"==typeof e)return e;var t=Promise.resolve(e);return function(){return t}},Re="X-Amz-Date",je="X-Amz-Signature",Me="X-Amz-Security-Token",He="authorization",De=Re.toLowerCase(),qe=[He,De,"date"],Be=je.toLowerCase(),Ne="x-amz-content-sha256",ze=Me.toLowerCase(),Ue={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Fe=/^proxy-/,We=/^sec-/,Ve="AWS4-HMAC-SHA256",Ge="AWS4-HMAC-SHA256-PAYLOAD",Xe="aws4_request",Ke={},Ze=[],Je=function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n,"/").concat(Xe)},Ye=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},$e=function(e,t,n){var r,o,i=e.headers,a={};try{for(var s=Oe(Object.keys(i).sort()),c=s.next();!c.done;c=s.next()){var u=c.value,l=u.toLowerCase();(l in Ue||(null==t?void 0:t.has(l))||Fe.test(l)||We.test(l))&&(!n||n&&!n.has(l))||(a[l]=i[u].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a},Qe=function(e,t){var n=e.headers,r=e.body;return ke(void 0,void 0,void 0,(function(){var e,o,i,a,s,c,u;return Ae(this,(function(l){switch(l.label){case 0:try{for(e=Oe(Object.keys(n)),o=e.next();!o.done;o=e.next())if((i=o.value).toLowerCase()===Ne)return[2,n[i]]}catch(e){c={error:e}}finally{try{o&&!o.done&&(u=e.return)&&u.call(e)}finally{if(c)throw c.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(d=r,"function"==typeof ArrayBuffer&&d instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(d))?((a=new t).update(r),s=xe,[4,a.digest()]):[3,3];case 2:return[2,s.apply(void 0,[l.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var d}))}))},et=function(e){var t=e.headers,n=e.query,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["headers","query"]);return Ie(Ie({},r),{headers:Ie({},t),query:n?tt(n):void 0})},tt=function(e){return Object.keys(e).reduce((function(t,n){var r,o=e[n];return Ie(Ie({},t),((r={})[n]=Array.isArray(o)?function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],Pe(o),!1):o,r))}),{})},nt=function(e){var t,n;e="function"==typeof e.clone?e.clone():et(e);try{for(var r=Oe(Object.keys(e.headers)),o=r.next();!o.done;o=r.next()){var i=o.value;qe.indexOf(i.toLowerCase())>-1&&delete e.headers[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},rt=function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e},ot=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,o=e.service,i=e.sha256,a=e.uriEscapePath,s=void 0===a||a;this.service=o,this.sha256=i,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Le(r),this.credentialProvider=Le(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),ke(this,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,l,d,f,h,p,v,g,y,m,w,b,E,S,C,T,x;return Ae(this,(function(I){switch(I.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,o=t.expiresIn,i=void 0===o?3600:o,a=t.unsignableHeaders,s=t.unhoistableHeaders,c=t.signableHeaders,u=t.signingRegion,l=t.signingService,[4,this.credentialProvider()];case 1:return d=I.sent(),null==u?[3,2]:(h=u,[3,4]);case 2:return[4,this.regionProvider()];case 3:h=I.sent(),I.label=4;case 4:return f=h,p=it(r),v=p.longDate,g=p.shortDate,i>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(y=Je(g,f,null!=l?l:this.service),m=function(e,t){var n,r,o;void 0===t&&(t={});var i="function"==typeof e.clone?e.clone():et(e),a=i.headers,s=i.query,c=void 0===s?{}:s;try{for(var u=Oe(Object.keys(a)),l=u.next();!l.done;l=u.next()){var d=l.value,f=d.toLowerCase();"x-amz-"!==f.slice(0,6)||(null===(o=t.unhoistableHeaders)||void 0===o?void 0:o.has(f))||(c[d]=a[d],delete a[d])}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return Ie(Ie({},e),{headers:a,query:c})}(nt(e),{unhoistableHeaders:s}),d.sessionToken&&(m.query[Me]=d.sessionToken),m.query["X-Amz-Algorithm"]=Ve,m.query["X-Amz-Credential"]="".concat(d.accessKeyId,"/").concat(y),m.query["X-Amz-Date"]=v,m.query["X-Amz-Expires"]=i.toString(10),w=$e(m,a,c),m.query["X-Amz-SignedHeaders"]=at(w),b=m.query,E=je,S=this.getSignature,C=[v,y,this.getSigningKey(d,f,g,l)],T=this.createCanonicalRequest,x=[m,w],[4,Qe(e,this.sha256)]);case 5:return[4,S.apply(this,C.concat([T.apply(this,x.concat([I.sent()]))]))];case 6:return b[E]=I.sent(),[2,m]}}))}))},e.prototype.sign=function(e,t){return ke(this,void 0,void 0,(function(){return Ae(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,o=t.signingDate,i=void 0===o?new Date:o,a=t.priorSignature,s=t.signingRegion,c=t.signingService;return ke(this,void 0,void 0,(function(){var e,t,o,u,l,d,f,h,p,v,g;return Ae(this,(function(y){switch(y.label){case 0:return null==s?[3,1]:(t=s,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=y.sent(),y.label=3;case 3:return e=t,o=it(i),u=o.shortDate,l=o.longDate,d=Je(u,e,null!=c?c:this.service),[4,Qe({headers:{},body:r},this.sha256)];case 4:return f=y.sent(),(h=new this.sha256).update(n),v=xe,[4,h.digest()];case 5:return p=v.apply(void 0,[y.sent()]),g=[Ge,l,d,a,p,f].join("\n"),[2,this.signString(g,{signingDate:i,signingRegion:e,signingService:c})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,o=void 0===r?new Date:r,i=n.signingRegion,a=n.signingService;return ke(this,void 0,void 0,(function(){var t,n,r,s,c,u,l,d;return Ae(this,(function(f){switch(f.label){case 0:return[4,this.credentialProvider()];case 1:return t=f.sent(),null==i?[3,2]:(r=i,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=f.sent(),f.label=4;case 4:return n=r,s=it(o).shortDate,l=(u=this.sha256).bind,[4,this.getSigningKey(t,n,s,a)];case 5:return(c=new(l.apply(u,[void 0,f.sent()]))).update(e),d=xe,[4,c.digest()];case 6:return[2,d.apply(void 0,[f.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,o=void 0===r?new Date:r,i=n.signableHeaders,a=n.unsignableHeaders,s=n.signingRegion,c=n.signingService;return ke(this,void 0,void 0,(function(){var t,n,r,u,l,d,f,h,p,v,g;return Ae(this,(function(y){switch(y.label){case 0:return[4,this.credentialProvider()];case 1:return t=y.sent(),null==s?[3,2]:(r=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=y.sent(),y.label=4;case 4:return n=r,u=nt(e),l=it(o),d=l.longDate,f=l.shortDate,h=Je(f,n,null!=c?c:this.service),u.headers[De]=d,t.sessionToken&&(u.headers[ze]=t.sessionToken),[4,Qe(u,this.sha256)];case 5:return p=y.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var o=Oe(Object.keys(t)),i=o.next();!i.done;i=o.next())if(e===i.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1}(Ne,u.headers)&&this.applyChecksum&&(u.headers[Ne]=p),v=$e(u,a,i),[4,this.getSignature(d,h,this.getSigningKey(t,n,f,c),this.createCanonicalRequest(u,v,p))];case 6:return g=y.sent(),u.headers[He]="".concat(Ve," ")+"Credential=".concat(t.accessKeyId,"/").concat(h,", ")+"SignedHeaders=".concat(at(v),", ")+"Signature=".concat(g),[2,u]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return"".concat(e.method,"\n").concat(this.getCanonicalPath(e),"\n").concat(function(e){var t,n,r=e.query,o=void 0===r?{}:r,i=[],a={},s=function(e){if(e.toLowerCase()===Be)return"continue";i.push(e);var t=o[e];"string"==typeof t?a[e]="".concat(f(e),"=").concat(f(t)):Array.isArray(t)&&(a[e]=t.slice(0).sort().reduce((function(t,n){return t.concat(["".concat(f(e),"=").concat(f(n))])}),[]).join("&"))};try{for(var c=Oe(Object.keys(o).sort()),u=c.next();!u.done;u=c.next())s(u.value)}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return i.map((function(e){return a[e]})).filter((function(e){return e})).join("&")}(e),"\n").concat(r.map((function(e){return"".concat(e,":").concat(t[e])})).join("\n"),"\n\n").concat(r.join(";"),"\n").concat(n)},e.prototype.createStringToSign=function(e,t,n){return ke(this,void 0,void 0,(function(){var r,o;return Ae(this,(function(i){switch(i.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return o=i.sent(),[2,"".concat(Ve,"\n").concat(e,"\n").concat(t,"\n").concat(xe(o))]}}))}))},e.prototype.getCanonicalPath=function(e){var t,n,r=e.path;if(this.uriEscapePath){var o=[];try{for(var i=Oe(r.split("/")),a=i.next();!a.done;a=i.next()){var s=a.value;0!==(null==s?void 0:s.length)&&("."!==s&&(".."===s?o.pop():o.push(s)))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}var c="".concat((null==r?void 0:r.startsWith("/"))?"/":"").concat(o.join("/")).concat(o.length>0&&(null==r?void 0:r.endsWith("/"))?"/":"");return encodeURIComponent(c).replace(/%2F/g,"/")}return r},e.prototype.getSignature=function(e,t,n,r){return ke(this,void 0,void 0,(function(){var o,i,a,s,c;return Ae(this,(function(u){switch(u.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return o=u.sent(),s=(a=this.sha256).bind,[4,n];case 2:return(i=new(s.apply(a,[void 0,u.sent()]))).update(o),c=xe,[4,i.digest()];case 3:return[2,c.apply(void 0,[u.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,o){return ke(void 0,void 0,void 0,(function(){var i,a,s,c,u,l,d,f,h;return Ae(this,(function(p){switch(p.label){case 0:return[4,Ye(e,t.secretAccessKey,t.accessKeyId)];case 1:if(i=p.sent(),(a="".concat(n,":").concat(r,":").concat(o,":").concat(xe(i),":").concat(t.sessionToken))in Ke)return[2,Ke[a]];for(Ze.push(a);Ze.length>50;)delete Ke[Ze.shift()];s="AWS4".concat(t.secretAccessKey),p.label=2;case 2:p.trys.push([2,7,8,9]),c=Oe([n,r,o,Xe]),u=c.next(),p.label=3;case 3:return u.done?[3,6]:(l=u.value,[4,Ye(e,s,l)]);case 4:s=p.sent(),p.label=5;case 5:return u=c.next(),[3,3];case 6:return[3,9];case 7:return d=p.sent(),f={error:d},[3,9];case 8:try{u&&!u.done&&(h=c.return)&&h.call(c)}finally{if(f)throw f.error}return[7];case 9:return[2,Ke[a]=s]}}))}))}(this.sha256,e,n,t,r||this.service)},e}(),it=function(e){var t,n=(t=e,rt(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}},at=function(e){return Object.keys(e).sort().join(";")},st=n(938);!function(e){e.OTHER="other",e.STYLESHEET="stylesheet",e.DOCUMENT="document",e.SCRIPT="script",e.IMAGE="image",e.FONT="font"}(_e||(_e={}));for(var ct,ut,lt,dt,ft=[{name:_e.STYLESHEET,list:["css","less"]},{name:_e.DOCUMENT,list:["htm","html","ts","doc","docx","pdf","xls","xlsx"]},{name:_e.SCRIPT,list:["js"]},{name:_e.IMAGE,list:["ai","bmp","gif","ico","jpeg","jpg","png","ps","psd","svg","tif","tiff"]},{name:_e.FONT,list:["fnt","fon","otf","ttf","woff"]}],ht=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}},pt=function(e){var t=e.substring(e.lastIndexOf("/")+1),n=t.substring(t.lastIndexOf(".")+1).split(/[?#]/)[0],r=_e.OTHER;return ft.forEach((function(e){e.list.indexOf(n)>-1&&(r=e.name)})),r},vt=function(e){var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);return t&&t[4]?t[4]:""},gt=function(e){var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);return t&&t[2]?t[2]:""},yt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},mt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},wt="POST",bt={expiresIn:60},Et=function(e){var t=this;this.sendFetch=function(e){return yt(t,void 0,void 0,(function(){var t,n,o,i,a,s,c,u;return mt(this,(function(l){switch(l.label){case 0:return t=vt(this.config.endpoint),n=JSON.stringify(St(e)),i=r.bind,c={method:wt},u={"content-type":"application/json"},a="X-Amz-Content-Sha256",[4,Tt(n)];case 1:return o=new(i.apply(r,[void 0,(c.headers=(u[a]=l.sent(),u.host=t,u),c.protocol=gt(this.config.endpoint),c.hostname=t,c.path="/appmonitors/"+e.AppMonitorDetails.id+"/",c.body=n,c)])),[4,this.awsSigV4.sign(o)];case 2:return s=l.sent(),[2,this.config.fetchRequestHandler.handle(s)]}}))}))},this.sendBeacon=function(e){return yt(t,void 0,void 0,(function(){var t,n,o,i,a,s,c,u;return mt(this,(function(l){switch(l.label){case 0:return t=vt(this.config.endpoint),n=JSON.stringify(St(e)),i=r.bind,c={method:wt},u={"content-type":"text/plain;charset=UTF-8"},a="X-Amz-Content-Sha256",[4,Tt(n)];case 1:return o=new(i.apply(r,[void 0,(c.headers=(u[a]=l.sent(),u.host=t,u),c.protocol=gt(this.config.endpoint),c.hostname=t,c.path="/appmonitors/"+e.AppMonitorDetails.id,c.body=n,c)])),[4,this.awsSigV4.presign(o,bt)];case 2:return s=l.sent(),[2,this.config.beaconRequestHandler.handle(s)]}}))}))},this.config=e,this.awsSigV4=new ot({applyChecksum:!0,credentials:e.credentials,region:e.region,service:"rum",uriEscapePath:!0,sha256:st.Sha256})},St=function(e){var t=[];return e.RumEvents.forEach((function(e){return t.push(Ct(e))})),{BatchId:e.BatchId,AppMonitorDetails:e.AppMonitorDetails,UserDetails:e.UserDetails,RumEvents:t}},Ct=function(e){return{id:e.id,timestamp:Math.round(e.timestamp.getTime()/1e3),type:e.type,metadata:e.metadata,details:e.details}},Tt=function(e){return yt(void 0,void 0,void 0,(function(){var t,n;return mt(this,(function(r){switch(r.label){case 0:return(t=new st.Sha256).update(e),n=xe,[4,t.digest()];case 1:return[2,n.apply(void 0,[r.sent()]).toLowerCase()]}}))}))},xt=function(){function e(){}return e.prototype.handle=function(e){var t=this.sendBeacon(e);return new Promise((function(e,n){t?e({response:new o({statusCode:200})}):n()}))},e.prototype.sendBeacon=function(e){var t=e.path;if(e.query){var n=p(e.query);n&&(t+="?"+n)}var r=e.port,o=e.protocol+"//"+e.hostname+(r?":"+r:"")+t;return navigator.sendBeacon(o,e.body)},e}(),It=function(){function e(e){var t=void 0===e?{}:e,n=t.fetchFunction,r=t.requestTimeout;this.requestTimeout=r,this.fetchFunction=n}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,r=this.requestTimeout;if(null==n?void 0:n.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var a=e.path;if(e.query){var s=p(e.query);s&&(a+="?"+s)}var c=e.port,u=e.method,l=e.protocol+"//"+e.hostname+(c?":"+c:"")+a,d={body:"GET"===u||"HEAD"===u?void 0:e.body,headers:new Headers(e.headers),method:u};"undefined"!=typeof AbortController&&(d.signal=n);var f,h=new Request(l,d),v=[this.fetchFunction.apply(window,[h]).then((function(e){for(var t=e.headers,n={},r=0,i=t.entries();r<i.length;r++){var a=i[r];n[a[0]]=a[1]}return void 0!==e.body?{response:new o({headers:n,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new o({headers:n,statusCode:e.status,body:t})}}))})),(f=r,void 0===f&&(f=0),new Promise((function(e,t){f&&setTimeout((function(){var e=new Error("Request did not complete within "+f+" ms");e.name="TimeoutError",t(e)}),f)})))];return n&&v.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(v)},e}(),kt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},At=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ot="CWR: Cannot dispatch; no AWS credentials.",Pt=function(){function e(e,t,n,r){var o=this;this.dispatchFetch=function(){return kt(o,void 0,void 0,(function(){return At(this,(function(e){return[2,this.dispatch(this.rum.sendFetch)]}))}))},this.dispatchBeacon=function(){return kt(o,void 0,void 0,(function(){return At(this,(function(e){return[2,this.dispatch(this.rum.sendBeacon)]}))}))},this.dispatchFetchFailSilent=function(){return kt(o,void 0,void 0,(function(){return At(this,(function(e){return[2,this.dispatchFetch().catch((function(){}))]}))}))},this.dispatchBeaconFailSilent=function(){return kt(o,void 0,void 0,(function(){return At(this,(function(e){return[2,this.dispatchBeacon().catch((function(){}))]}))}))},this.defaultClientBuilder=function(e,t,n){return new Et({fetchRequestHandler:new It({fetchFunction:o.config.fetchFunction}),beaconRequestHandler:new xt,endpoint:e,region:t,credentials:n})},this.region=e,this.endpoint=t,this.eventCache=n,this.enabled=!0,this.buildClient=r.clientBuilder||this.defaultClientBuilder,this.config=r,this.startDispatchTimer(),this.rum={sendFetch:function(){return Promise.reject(new Error(Ot))},sendBeacon:function(){return Promise.reject(new Error(Ot))}}}return e.prototype.enable=function(){this.enabled=!0,this.startDispatchTimer()},e.prototype.disable=function(){this.stopDispatchTimer(),this.enabled=!1},e.prototype.setAwsCredentials=function(e){this.rum=this.buildClient(this.endpoint,this.region,e),"function"==typeof e&&e()},e.prototype.startDispatchTimer=function(){document.addEventListener("visibilitychange",this.dispatchBeaconFailSilent),document.addEventListener("pagehide",this.dispatchBeaconFailSilent),this.config.dispatchInterval<=0||this.dispatchTimerId||(this.dispatchTimerId=window.setInterval(this.dispatchFetchFailSilent,this.config.dispatchInterval))},e.prototype.stopDispatchTimer=function(){document.removeEventListener("visibilitychange",this.dispatchBeaconFailSilent),document.removeEventListener("pagehide",this.dispatchBeaconFailSilent),this.dispatchTimerId&&(window.clearInterval(this.dispatchTimerId),this.dispatchTimerId=void 0)},e.prototype.dispatch=function(e){return kt(this,void 0,void 0,(function(){var t;return At(this,(function(n){return this.enabled&&this.eventCache.hasEvents()?(t={BatchId:ue(),AppMonitorDetails:this.eventCache.getAppMonitorDetails(),UserDetails:this.eventCache.getUserDetails(),RumEvents:this.eventCache.getEventBatch()},[2,e(t)]):[2]}))}))},e}(),_t="navigation",Lt="load",Rt=function(){function e(){var e=this;this.eventListener=function(){0===performance.getEntriesByType(_t).length?e.performanceNavigationEventHandlerTimingLevel1():new PerformanceObserver((function(t){t.getEntries().forEach((function(t){t.entryType===_t&&e.performanceNavigationEventHandlerTimingLevel2(t)}))})).observe({entryTypes:[_t]})},this.performanceNavigationEventHandlerTimingLevel1=function(){setTimeout((function(){var t=performance.timing,n=t.navigationStart,r={version:"1.0.0",initiatorType:"navigation",startTime:0,unloadEventStart:t.unloadEventStart>0?t.unloadEventStart-n:0,promptForUnload:t.unloadEventEnd-t.unloadEventStart,redirectStart:t.redirectStart>0?t.redirectStart-n:0,redirectTime:t.redirectEnd-t.redirectStart,fetchStart:t.fetchStart>0?t.fetchStart-n:0,domainLookupStart:t.domainLookupStart>0?t.domainLookupStart-n:0,dns:t.domainLookupEnd-t.domainLookupStart,connectStart:t.connectStart>0?t.connectStart-n:0,connect:t.connectEnd-t.connectStart,secureConnectionStart:t.secureConnectionStart>0?t.secureConnectionStart-n:0,tlsTime:t.secureConnectionStart>0?t.connectEnd-t.secureConnectionStart:0,requestStart:t.requestStart>0?t.requestStart-n:0,timeToFirstByte:t.responseStart-t.requestStart,responseStart:t.responseStart>0?t.responseStart-n:0,responseTime:t.responseStart>0?t.responseEnd-t.responseStart:0,domInteractive:t.domInteractive>0?t.domInteractive-n:0,domContentLoadedEventStart:t.domContentLoadedEventStart>0?t.domContentLoadedEventStart-n:0,domContentLoaded:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,domComplete:t.domComplete>0?t.domComplete-n:0,domProcessingTime:t.loadEventStart-t.responseEnd,loadEventStart:t.loadEventStart>0?t.loadEventStart-n:0,loadEventTime:t.loadEventEnd-t.loadEventStart,duration:t.loadEventEnd-t.navigationStart,navigationTimingLevel:1};e.recordEvent&&e.recordEvent(B,r)}),0)},this.performanceNavigationEventHandlerTimingLevel2=function(t){var n={version:"1.0.0",initiatorType:t.initiatorType,navigationType:t.type,startTime:t.startTime,unloadEventStart:t.unloadEventStart,promptForUnload:t.unloadEventEnd-t.unloadEventStart,redirectCount:t.redirectCount,redirectStart:t.redirectStart,redirectTime:t.redirectEnd-t.redirectStart,workerStart:t.workerStart,workerTime:t.workerStart>0?t.fetchStart-t.workerStart:0,fetchStart:t.fetchStart,domainLookupStart:t.domainLookupStart,dns:t.domainLookupEnd-t.domainLookupStart,nextHopProtocol:t.nextHopProtocol,connectStart:t.connectStart,connect:t.connectEnd-t.connectStart,secureConnectionStart:t.secureConnectionStart,tlsTime:t.secureConnectionStart>0?t.connectEnd-t.secureConnectionStart:0,requestStart:t.requestStart,timeToFirstByte:t.responseStart-t.requestStart,responseStart:t.responseStart,responseTime:t.responseStart>0?t.responseEnd-t.responseStart:0,domInteractive:t.domInteractive,domContentLoadedEventStart:t.domContentLoadedEventStart,domContentLoaded:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,domComplete:t.domComplete,domProcessingTime:t.loadEventStart-t.responseEnd,loadEventStart:t.loadEventStart,loadEventTime:t.loadEventEnd-t.loadEventStart,duration:t.duration,headerSize:t.transferSize-t.encodedBodySize,transferSize:t.transferSize,compressionRatio:t.encodedBodySize>0?t.decodedBodySize/t.encodedBodySize:0,navigationTimingLevel:2};e.recordEvent&&e.recordEvent(B,n)},this.pluginId="com.amazonaws.rum.navigation",this.enabled=!0}return e.prototype.load=function(e){if(this.recordEvent=e.record,this.enabled)if(this.hasTheWindowLoadEventFired()){var t=window.performance.getEntriesByType(_t)[0];this.performanceNavigationEventHandlerTimingLevel2(t)}else window.addEventListener(Lt,this.eventListener)},e.prototype.enable=function(){this.enabled||(this.enabled=!0,window.addEventListener(Lt,this.eventListener))},e.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.eventListener&&window.removeEventListener(Lt,this.eventListener))},e.prototype.hasTheWindowLoadEventFired=function(){if(window.performance&&window.performance.getEntriesByType(_t).length){var e=window.performance.getEntriesByType(_t)[0];return Boolean(e.loadEventEnd)}return!1},e.prototype.getPluginId=function(){return this.pluginId},e}(),jt=function(){return jt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jt.apply(this,arguments)},Mt="resource",Ht="load",Dt={eventLimit:10,recordAllTypes:[_e.DOCUMENT,_e.SCRIPT],sampleTypes:[_e.STYLESHEET,_e.IMAGE,_e.FONT,_e.OTHER]},qt=function(){function e(e){var t=this;this.resourceEventListener=function(e){var n=[],r=[],o=0,i=new PerformanceObserver((function(e){e.getEntries().filter((function(e){return e.entryType===Mt})).forEach((function(e){var o=pt(e.name);t.config.recordAllTypes.includes(o)?n.push(e):t.config.sampleTypes.includes(o)&&r.push(e)}))}));i.observe({entryTypes:[Mt]});var a=performance.getEntriesByType(Mt);for(void 0!==a&&a.length>0&&a.forEach((function(e){var o=pt(e.name);t.config.recordAllTypes.includes(o)?n.push(e):t.config.sampleTypes.includes(o)&&r.push(e)})),ht(n);n.length>0&&o<t.config.eventLimit;)t.recordResourceEvent(n.pop()),o++;for(ht(r);r.length>0&&o<t.config.eventLimit;)t.recordResourceEvent(r.pop()),o++},this.recordResourceEvent=function(e){if(t.recordEvent&&vt(e.name)!==vt(t.context.config.endpoint)){var n={version:"1.0.0",initiatorType:e.initiatorType,duration:e.duration,fileType:pt(e.name),transferSize:e.transferSize};t.context.config.recordResourceUrl&&(n.targetUrl=e.name),t.recordEvent("com.amazon.rum.performance_resource_event",n)}},this.pluginId="com.amazonaws.rum.resource",this.enabled=!0,this.config=jt(jt({},Dt),e)}return e.prototype.load=function(e){this.context=e,this.recordEvent=e.record,window.addEventListener(Ht,this.resourceEventListener)},e.prototype.enable=function(){this.enabled||(this.enabled=!0,window.addEventListener(Ht,this.resourceEventListener))},e.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.resourceEventListener&&window.removeEventListener(Ht,this.resourceEventListener))},e.prototype.getPluginId=function(){return this.pluginId},e}(),Bt=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},Nt=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},zt=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Ut=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},Ft="function"==typeof WeakSet?new WeakSet:new Set,Wt=function(e,t,n){var r;return function(){t.value>=0&&(n||Ft.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},Vt=-1,Gt=function(){return"hidden"===document.visibilityState?0:1/0},Xt=function(){zt((function(e){var t=e.timeStamp;Vt=t}),!0)},Kt=function(){return Vt<0&&(Vt=Gt(),Xt(),Ut((function(){setTimeout((function(){Vt=Gt(),Xt()}),0)}))),{get timeStamp(){return Vt}}},Zt={passive:!0,capture:!0},Jt=new Date,Yt=function(e,t){ct||(ct=t,ut=e,lt=new Date,en(removeEventListener),$t())},$t=function(){if(ut>=0&&ut<lt-Jt){var e={entryType:"first-input",name:ct.type,target:ct.target,cancelable:ct.cancelable,startTime:ct.timeStamp,processingStart:ct.timeStamp+ut};dt.forEach((function(t){t(e)})),dt=[]}},Qt=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){Yt(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,Zt),removeEventListener("pointercancel",r,Zt)};addEventListener("pointerup",n,Zt),addEventListener("pointercancel",r,Zt)}(t,e):Yt(t,e)}},en=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Qt,Zt)}))},tn=function(){function e(){this.pluginId="com.amazonaws.rum.web-vitals"}return e.prototype.load=function(e){var t=this;this.recordEvent=e.record,function(e,t){var n,r=Kt(),o=Bt("LCP"),i=function(e){var t=e.startTime;t<r.timeStamp&&(o.value=t,o.entries.push(e)),n()},a=Nt("largest-contentful-paint",i);if(a){n=Wt(e,o,t);var s=function(){Ft.has(o)||(a.takeRecords().map(i),a.disconnect(),Ft.add(o),n())};["keydown","click"].forEach((function(e){addEventListener(e,s,{once:!0,capture:!0})})),zt(s,!0),Ut((function(r){o=Bt("LCP"),n=Wt(e,o,t),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-r.timeStamp,Ft.add(o),n()}))}))}))}}((function(e){return t.getWebVitalData(e,"com.amazon.rum.largest_contentful_paint_event")})),function(e,t){var n,r=Kt(),o=Bt("FID"),i=function(e){e.startTime<r.timeStamp&&(o.value=e.processingStart-e.startTime,o.entries.push(e),Ft.add(o),n())},a=Nt("first-input",i);n=Wt(e,o,t),a&&zt((function(){a.takeRecords().map(i),a.disconnect()}),!0),a&&Ut((function(){var r;o=Bt("FID"),n=Wt(e,o,t),dt=[],ut=-1,ct=null,en(addEventListener),r=i,dt.push(r),$t()}))}((function(e){return t.getWebVitalData(e,"com.amazon.rum.first_input_delay_event")})),function(e,t){var n,r=Bt("CLS",0),o=function(e){e.hadRecentInput||(r.value+=e.value,r.entries.push(e),n())},i=Nt("layout-shift",o);i&&(n=Wt(e,r,t),zt((function(){i.takeRecords().map(o),n()})),Ut((function(){r=Bt("CLS",0),n=Wt(e,r,t)})))}((function(e){return t.getWebVitalData(e,"com.amazon.rum.cumulative_layout_shift_event")}))},e.prototype.enable=function(){},e.prototype.disable=function(){},e.prototype.getPluginId=function(){return this.pluginId},e.prototype.configure=function(e){},e.prototype.getWebVitalData=function(e,t){var n={version:"1.0.0",value:e.value};this.recordEvent(t,n)},e}(),nn=function(e){if(crypto)return crypto.getRandomValues(e);if(msCrypto)return msCrypto.getRandomValues(e);throw new Error("No crypto library found.")},rn=[],on=0;on<256;on++)rn[on]=(on+256).toString(16).substr(1);var an,sn,cn="X-Amzn-Trace-Id",un={logicalServiceName:"rum.aws.amazon.com",urlsToInclude:[/.*/],urlsToExclude:[/cognito\-identity\.([^\.]*\.)?amazonaws\.com/,/sts\.([^\.]*\.)?amazonaws\.com/],stackTraceLength:200,recordAllRequests:!1,addXRayTraceIdHeader:!1},ln=function(e,t){var n=t.urlsToInclude.some((function(t){return t.test(e)})),r=t.urlsToExclude.some((function(t){return t.test(e)}));return n&&!r},dn=function(){return Date.now()/1e3},fn=function(e,t,n){var r={version:"1.0.0",name:e,origin:"AWS::RUM::AppMonitor",id:yn(),start_time:t,trace_id:gn(),end_time:void 0,subsegments:[],in_progress:!1};return n&&(r.http=n),r},hn=function(e,t,n){var r={id:yn(),name:e,start_time:t,end_time:void 0,in_progress:!1,namespace:e.endsWith("amazonaws.com")?"aws":"remote"};return n&&(r.http=n),r},pn=function(e){return(e.hostname?e.hostname:e.url?vt(e.url):vt(e.toString()))||window.location.hostname},vn=function(e,t){return"Root="+e+";Parent="+t+";Sampled=1"},gn=function(){return"1-"+mn()+"-"+wn()},yn=function(){var e=new Uint8Array(8);return nn(e),bn(e)},mn=function(){return Math.floor(Date.now()/1e3).toString(16)},wn=function(){var e=new Uint8Array(12);return nn(e),bn(e)},bn=function(e){for(var t="",n=0;n<e.length;n++)t+=rn[e[n]];return t},En=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sn=function(e){function t(t){var n=e.call(this,t)||this;return n.name="XMLHttpRequest error",n}return En(t,e),t}(Error),Cn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tn=function(){return Tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tn.apply(this,arguments)},xn=function(e){function t(t){var n=e.call(this)||this;return n.addXRayTraceIdHeader=function(){return n.config.addXRayTraceIdHeader},n.isTracingEnabled=function(){return n.context.config.enableXRay},n.isSessionRecorded=function(){var e;return(null===(e=n.context.getSession())||void 0===e?void 0:e.record)||!1},n.handleXhrLoadEvent=function(e){var t=e.target,r=n.xhrMap.get(t);if(r){var o=dn();r.trace.end_time=o,r.trace.subsegments[0].end_time=o,r.trace.subsegments[0].http.response={status:t.status};var i=parseInt(t.getResponseHeader("Content-Length"),10);isNaN(i)||(r.trace.subsegments[0].http.response.content_length=parseInt(t.getResponseHeader("Content-Length"),10)),n.recordTraceEvent(r.trace),n.recordHttpEventWithResponse(r,t)}},n.handleXhrErrorEvent=function(e){var t=e.target,r=n.xhrMap.get(t),o=t.statusText?t.status.toString()+": "+t.statusText:t.status.toString();if(r){var i=dn();r.trace.end_time=i,r.trace.subsegments[0].end_time=i,r.trace.subsegments[0].error=!0,r.trace.subsegments[0].cause={exceptions:[{type:"XMLHttpRequest error",message:o}]},n.recordTraceEvent(r.trace),n.recordHttpEventWithError(r,new Sn(o))}},n.handleXhrAbortEvent=function(e){var t=e.target,r=n.xhrMap.get(t),o="XMLHttpRequest abort";if(r){var i=dn();r.trace.end_time=i,r.trace.subsegments[0].end_time=i,r.trace.subsegments[0].error=!0,r.trace.subsegments[0].cause={exceptions:[{type:o}]},n.recordTraceEvent(r.trace),n.recordHttpEventWithError(r,o)}},n.handleXhrTimeoutEvent=function(e){var t=e.target,r=n.xhrMap.get(t),o="XMLHttpRequest timeout";if(r){var i=dn();r.trace.end_time=i,r.trace.subsegments[0].end_time=i,r.trace.subsegments[0].error=!0,r.trace.subsegments[0].cause={exceptions:[{type:o}]},n.recordTraceEvent(r.trace),n.recordHttpEventWithError(r,o)}},n.initializeTrace=function(e){var t=dn();e.trace=fn(n.config.logicalServiceName,t),e.trace.subsegments.push(hn(pn(e.url),t,{request:{method:e.method,traced:!0}}))},n.sendWrapper=function(){var e=n;return function(t){return function(){var n=e.xhrMap.get(this);return n&&(this.addEventListener("load",e.handleXhrLoadEvent),this.addEventListener("error",e.handleXhrErrorEvent),this.addEventListener("abort",e.handleXhrAbortEvent),this.addEventListener("timeout",e.handleXhrTimeoutEvent),e.initializeTrace(n),e.isTracingEnabled()&&e.addXRayTraceIdHeader()&&e.isSessionRecorded()&&this.setRequestHeader(cn,vn(n.trace.trace_id,n.trace.subsegments[0].id))),t.apply(this,arguments)}}},n.openWrapper=function(){var e=n;return function(t){return function(n,r,o){return ln(r,e.config)&&e.xhrMap.set(this,{url:r,method:n,async:o}),t.apply(this,arguments)}}},n.pluginId="com.amazonaws.rum.xhr",n.config=Tn(Tn({},un),t),n.xhrMap=new Map,n}return Cn(t,e),t.prototype.load=function(e){this.context=e,this.enable()},t.prototype.getPluginId=function(){return this.pluginId},t.prototype.patches=function(){return[{nodule:XMLHttpRequest.prototype,name:"send",wrapper:this.sendWrapper},{nodule:XMLHttpRequest.prototype,name:"open",wrapper:this.openWrapper}]},t.prototype.statusOk=function(e){return e>=200&&e<300},t.prototype.recordHttpEventWithResponse=function(e,t){!this.config.recordAllRequests&&this.statusOk(t.status)||this.context.record(D,{version:"1.0.0",request:{method:e.method},response:{status:t.status,statusText:t.statusText}})},t.prototype.recordHttpEventWithError=function(e,t){var n={version:"1.0.0",request:{method:e.method}};n.error=X({type:"error",error:t},this.config.stackTraceLength),this.context.record(D,n)},t.prototype.recordTraceEvent=function(e){this.isTracingEnabled()&&this.isSessionRecorded()&&this.context.record(q,e)},t}(ve),In=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kn=function(){return kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kn.apply(this,arguments)},An=function(e){function t(t){var n=e.call(this)||this;return n.isTracingEnabled=function(){return n.context.config.enableXRay},n.isSessionRecorded=function(){var e;return(null===(e=n.context.getSession())||void 0===e?void 0:e.record)||!1},n.beginTrace=function(e,t,r){var o=dn(),i=function(e,t){var n={request:{}};return n.request.method=(null==e?void 0:e.method)?e.method:"GET",n.request.traced=t,n}(t,!0),a=fn(n.config.logicalServiceName,o),s=hn(pn(e),o,i);return a.subsegments.push(s),n.config.addXRayTraceIdHeader&&n.addXRayTraceIdHeader(e,t,r,a),a},n.addXRayTraceIdHeader=function(e,t,n,r){if(e.headers)return o=e.headers,i=r.trace_id,a=r.subsegments[0].id,void o.set(cn,vn(i,a));var o,i,a;t||(t={},[].push.call(n,t)),function(e,t,n){e.headers||(e.headers={}),e.headers[cn]=vn(t,n)}(t,r.trace_id,r.subsegments[0].id)},n.endTrace=function(e,t,r){if(e){var o=dn();if(e.subsegments[0].end_time=o,e.end_time=o,t){e.subsegments[0].http.response={status:t.status};var i=parseInt(t.headers.get("Content-Length"),10);isNaN(i)||(e.subsegments[0].http.response.content_length=i)}r&&(e.subsegments[0].error=!0,r instanceof Object?n.appendErrorCauseFromObject(e.subsegments[0],r):G(r)&&n.appendErrorCauseFromPrimitive(e.subsegments[0],r.toString())),n.context.record(q,e)}},n.createHttpEvent=function(e,t){return{version:"1.0.0",request:{method:(null==t?void 0:t.method)?t.method:"GET"}}},n.recordHttpEventWithResponse=function(e,t){!n.config.recordAllRequests&&t.ok||(e.response={status:t.status,statusText:t.statusText},n.context.record(D,e))},n.recordHttpEventWithError=function(e,t){e.error=X({type:"error",error:t},n.config.stackTraceLength),n.context.record(D,e)},n.fetch=function(e,t,r,o,i){var a,s,c=n.createHttpEvent(o,i);return s="string"==typeof o?o:o.url,ln(s,n.config)?(n.isTracingEnabled()&&n.isSessionRecorded()&&(a=n.beginTrace(o,i,r)),e.apply(t,r).then((function(e){return n.endTrace(a,e,void 0),n.recordHttpEventWithResponse(c,e),e})).catch((function(e){throw n.endTrace(a,void 0,e),n.recordHttpEventWithError(c,e),e}))):e.apply(t,r)},n.fetchWrapper=function(){var e=n;return function(t){return function(n,r){return e.fetch(t,this,arguments,n,r)}}},n.pluginId="com.amazonaws.rum.fetch",n.config=kn(kn({},un),t),n}return In(t,e),t.prototype.load=function(e){this.context=e,this.enable()},t.prototype.getPluginId=function(){return this.pluginId},t.prototype.patches=function(){return[{nodule:window,name:"fetch",wrapper:this.fetchWrapper}]},t.prototype.appendErrorCauseFromPrimitive=function(e,t){e.cause={exceptions:[{type:t}]}},t.prototype.appendErrorCauseFromObject=function(e,t){e.cause={exceptions:[{type:t.name,message:t.message}]}},t}(ve),On=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pn=function(e){function t(){var t=e.call(this)||this;return t.pushState=function(){var e=t;return function(t){return function(n,r,o){var i=t.apply(this,arguments);return e.recordPageView(),i}}},t.replaceState=function(){var e=t;return function(t){return function(n,r,o){var i=t.apply(this,arguments);return e.recordPageView(),i}}},t.popstateListener=function(e){t.recordPageView()},t.recordPageView=function(){t.context.recordPageView(t.createIdForCurrentPage())},t.pluginId="com.amazonaws.rum.page-view",t.enable(),t}return On(t,e),t.prototype.load=function(e){this.context=e,this.addListener(),this.recordPageView()},t.prototype.getPluginId=function(){return this.pluginId},t.prototype.patches=function(){return[{nodule:History.prototype,name:"pushState",wrapper:this.pushState},{nodule:History.prototype,name:"replaceState",wrapper:this.replaceState}]},t.prototype.addListener=function(){window.addEventListener("popstate",this.popstateListener)},t.prototype.createIdForCurrentPage=function(){var e=window.location.pathname,t=window.location.hash;switch(this.context.config.pageIdFormat){case sn.PATH_AND_HASH:return e&&t?e+t:e||(t||"");case sn.HASH:return t||"";case sn.PATH:default:return e||""}},t}(ve),_n=function(){return _n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_n.apply(this,arguments)},Ln=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};!function(e){e.ERRORS="errors",e.PERFORMANCE="performance",e.INTERACTION="interaction",e.HTTP="http"}(an||(an={})),function(e){e.PATH="PATH",e.HASH="HASH",e.PATH_AND_HASH="PATH_AND_HASH"}(sn||(sn={}));var Rn=function(){function e(e,t,n,r){void 0===r&&(r={}),void 0===n&&(n="us-west-2");var o=_n(_n({},{unique:!1,domain:window.location.hostname,path:"/",sameSite:"Strict",secure:!0}),r.cookieAttributes);delete r.cookieAttributes,this.config=_n(_n({fetchFunction:fetch},function(e){return{allowCookies:!1,batchLimit:100,cookieAttributes:e,disableAutoPageView:!1,dispatchInterval:5e3,enableRumClient:!0,enableXRay:!1,endpoint:"https://dataplane.rum.us-west-2.amazonaws.com",eventCacheSize:200,eventPluginsToLoad:[],pageIdFormat:sn.PATH,pagesToExclude:[],pagesToInclude:[],recordResourceUrl:!0,routeChangeComplete:100,routeChangeTimeout:1e4,sessionEventLimit:200,sessionLengthSeconds:1800,sessionSampleRate:1,telemetries:[],userIdRetentionDays:30}}(o)),r),this.config.endpoint=this.getDataPlaneEndpoint(n,r),this.eventCache=this.initEventCache(e,t),this.dispatchManager=this.initDispatch(n),this.pluginManager=this.initPluginManager(e,t),this.config.enableRumClient?this.enable():this.disable()}return e.prototype.setAwsCredentials=function(e){this.dispatchManager.setAwsCredentials(e)},e.prototype.addPlugin=function(e){this.pluginManager.addPlugin(e)},e.prototype.dispatch=function(){this.dispatchManager.dispatchFetch()},e.prototype.dispatchBeacon=function(){this.dispatchManager.dispatchBeacon()},e.prototype.enable=function(){this.eventCache.enable(),this.pluginManager.enable(),this.dispatchManager.enable()},e.prototype.disable=function(){this.dispatchManager.disable(),this.pluginManager.disable(),this.eventCache.disable()},e.prototype.allowCookies=function(e){this.config.allowCookies=e},e.prototype.recordPageView=function(e){this.eventCache.recordPageView(e)},e.prototype.recordError=function(e){this.pluginManager.record(Z,e)},e.prototype.registerDomEvents=function(e){this.pluginManager.updatePlugin(z,e)},e.prototype.initEventCache=function(e,t){return new be({id:e,version:t},this.config)},e.prototype.initDispatch=function(e){var t=new Pt(e,this.config.endpoint,this.eventCache,this.config);return this.config.identityPoolId&&this.config.guestRoleArn?t.setAwsCredentials(new L(this.config).ChainAnonymousCredentialsProvider):this.config.identityPoolId&&t.setAwsCredentials(new M(this.config).ChainAnonymousCredentialsProvider),t},e.prototype.initPluginManager=function(e,t){var n=this.constructBuiltinPlugins(),r=Ln(Ln([],n,!0),this.config.eventPluginsToLoad,!0),o={applicationId:e,applicationVersion:t,config:this.config,record:this.eventCache.recordEvent,recordPageView:this.eventCache.recordPageView,getSession:this.eventCache.getSession},i=new H(o);return this.config.disableAutoPageView||i.addPlugin(new Pn),r.forEach((function(e){i.addPlugin(e)})),i},e.prototype.constructBuiltinPlugins=function(){var e=[],t=this.telemetryFunctor();return this.config.telemetries.forEach((function(n){"string"==typeof n&&t[n.toLowerCase()]?e=Ln(Ln([],e,!0),t[n.toLowerCase()]({}),!0):Array.isArray(n)&&t[n[0].toLowerCase()]&&(e=Ln(Ln([],e,!0),t[n[0].toLowerCase()](n[1]),!0))})),e},e.prototype.getDataPlaneEndpoint=function(e,t){return t.endpoint?t.endpoint:"https://dataplane.rum.${REGION}.amazonaws.com".replace("${REGION}",e)},e.prototype.telemetryFunctor=function(){var e;return(e={})[an.ERRORS]=function(e){return[new Y(e)]},e[an.PERFORMANCE]=function(e){return[new Rt,new qt(e),new tn]},e[an.INTERACTION]=function(e){return[new F(e)]},e[an.HTTP]=function(e){return[new xn(e),new An(e)]},e},e}(),jn=function(){return jn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jn.apply(this,arguments)},Mn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Hn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Dn=function(e){return Mn(void 0,void 0,void 0,(function(){var t,n;return Hn(this,(function(r){switch(r.label){case 0:return t={},n={},void 0===e.u?[3,2]:[4,(o=e.u,Mn(void 0,void 0,void 0,(function(){var e;return Hn(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch(o,{mode:"cors",method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()];case 3:throw e=t.sent(),new Error("CWR: Failed to load remote config: "+e);case 4:return[2]}}))})))];case 1:return n=r.sent(),t=jn(jn({},n.clientConfig),e.c),[3,3];case 2:void 0!==e.c&&(t=e.c),r.label=3;case 3:return[2,t]}var o}))}))},qn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Bn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Nn=function(){function e(){var e=this;this.commandHandlerMap={setAwsCredentials:function(t){e.orchestration.setAwsCredentials(t)},recordPageView:function(t){e.orchestration.recordPageView(t)},recordError:function(t){e.orchestration.recordError(t)},registerDomEvents:function(t){e.orchestration.registerDomEvents(t)},dispatch:function(){e.orchestration.dispatch()},dispatchBeacon:function(){e.orchestration.dispatchBeacon()},enable:function(){e.orchestration.enable()},disable:function(){e.orchestration.disable()},allowCookies:function(t){if("boolean"!=typeof t)throw new Error("IncorrectParametersException");e.orchestration.allowCookies(t)}}}return e.prototype.init=function(e){return qn(this,void 0,void 0,(function(){var t;return Bn(this,(function(n){switch(n.label){case 0:return void 0===e.u?[3,2]:[4,Dn(e)];case 1:return t=n.sent(),e.c=t,this.initCwr(e),[3,3];case 2:this.initCwr(e),n.label=3;case 3:return[2]}}))}))},e.prototype.push=function(e){return qn(this,void 0,void 0,(function(){var t;return Bn(this,(function(n){if(!(t=this.commandHandlerMap[e.c]))throw new Error("CWR: UnsupportedOperationException: "+e.c);return t(e.p),[2]}))}))},e.prototype.initCwr=function(e){var t=this;this.orchestration=new Rn(e.i,e.v,e.r,e.c),window[e.n]=function(e,n){t.push({c:e,p:n})},e.q.forEach((function(e){t.push(e)})),e.q=[]},e}();!window.AwsRumClient&&window.AwsNexusTelemetry&&(window.AwsRumClient=window.AwsNexusTelemetry),"function"==typeof fetch&&"function"==typeof navigator.sendBeacon?(new Nn).init(window.AwsRumClient):window[window.AwsRumClient.n]=function(){}}()}();